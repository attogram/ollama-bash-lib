# ollama_generate_stream_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.42.14

## Demo

```bash
ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.840650007Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.840669789Z",
  "response": "",
  "thinking": "The",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.840676531Z",
  "response": "",
  "thinking": " user",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.84191626Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.841924451Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.841930008Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.841936522Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.843583329Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.843591276Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.843597733Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.843605357Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.843610164Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.843615649Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.843901257Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.852951921Z",
  "response": "",
  "thinking": " This",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.852960883Z",
  "response": "",
  "thinking": " is",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.852966866Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.852973521Z",
  "response": "",
  "thinking": " straightforward",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.852979329Z",
  "response": "",
  "thinking": " request",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.852984251Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.85299265Z",
  "response": "",
  "thinking": " no",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.852997943Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.853003543Z",
  "response": "",
  "thinking": " violation",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.853008411Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.853013698Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.853018362Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.853023678Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.853028344Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.853453526Z",
  "response": "",
  "thinking": " describing",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.868280179Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.868293083Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.868300513Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.871552756Z",
  "response": "",
  "thinking": " Could",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.877058943Z",
  "response": "",
  "thinking": " be",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.879899823Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.885060836Z",
  "response": "",
  "thinking": "fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.888733472Z",
  "response": "",
  "thinking": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.893527196Z",
  "response": "",
  "thinking": "\",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.901346962Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.905058147Z",
  "response": "",
  "thinking": "tim",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.907105209Z",
  "response": "",
  "thinking": "id",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.910821918Z",
  "response": "",
  "thinking": "\",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.915508751Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.919729995Z",
  "response": "",
  "thinking": "h",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.929487687Z",
  "response": "",
  "thinking": "oppy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.92950247Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.934964637Z",
  "response": "",
  "thinking": " We",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.939846225Z",
  "response": "",
  "thinking": " just",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.941461692Z",
  "response": "",
  "thinking": " output",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.946417954Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.953806436Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.955546145Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.966546579Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.99044398Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.996112125Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:58.999246166Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.004556455Z",
  "response": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.008601132Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.014725265Z",
  "response": " h",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.022937312Z",
  "response": "oppy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.022951051Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.0267166Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.026721524Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 434571396,
  "prompt_eval_count": 81,
  "eval_count": 70
}
```

## Demo Debug

```bash
OLLAMA_LIB_DEBUG=1 ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
[DEBUG] 00:48:59:589711600: ollama_generate_stream_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 00:48:59:600038900: ollama_generate_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 00:48:59:610217700: ollama_generate_json: OLLAMA_LIB_STREAM: 1
[DEBUG] 00:48:59:635298600: ollama_api_post: [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 00:48:59:646208900: _call_curl: [POST] [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 00:48:59:656767900: _call_curl: OLLAMA_LIB_API: https://ollama.com
[DEBUG] 00:48:59:667813900: _call_curl: Turbo Mode
[DEBUG] 00:48:59:678405800: _call_curl: adding json body: [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 00:49:00:642215500: ollama_api_post: success: return 0
[DEBUG] 00:49:00:654430100: ollama_generate_json: success: return: 0
[DEBUG] 00:49:00:665494100: ollama_generate_stream_json: return: 0
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.949927407Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.949945789Z",
  "response": "",
  "thinking": "The",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.949955266Z",
  "response": "",
  "thinking": " user",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.949962062Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.949967531Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.949973151Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.949977861Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.94998288Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.949988081Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.949992698Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.950000549Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.950006391Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.95001108Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.950016535Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.950021244Z",
  "response": "",
  "thinking": " That's",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.950025646Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.950031835Z",
  "response": "",
  "thinking": " straightforward",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.950037357Z",
  "response": "",
  "thinking": " request",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.950042165Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.950049771Z",
  "response": "",
  "thinking": " We",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.950054946Z",
  "response": "",
  "thinking": " can",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.950059565Z",
  "response": "",
  "thinking": " comply",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.950065036Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.950069809Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.950076033Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.952573873Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.953009055Z",
  "response": "",
  "thinking": " describing",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.981779606Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.981790041Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.981796684Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.981802456Z",
  "response": "",
  "thinking": " e",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.981807414Z",
  "response": "",
  "thinking": ".g",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.981817609Z",
  "response": "",
  "thinking": ".,",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.99511276Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.995127462Z",
  "response": "",
  "thinking": "fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:48:59.998850435Z",
  "response": "",
  "thinking": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.014732945Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.014744322Z",
  "response": "",
  "thinking": " swift",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.014751602Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.014757642Z",
  "response": "",
  "thinking": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.020089914Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.022348256Z",
  "response": "",
  "thinking": " There's",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.023909624Z",
  "response": "",
  "thinking": " no",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.029371147Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.033507182Z",
  "response": "",
  "thinking": " violation",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.037767193Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.050997655Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.051011957Z",
  "response": "",
  "thinking": " the",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.054717065Z",
  "response": "",
  "thinking": " answer",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.058335559Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.097278712Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.097288654Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.097295236Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.106018296Z",
  "response": " swift",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.106028449Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.113973521Z",
  "response": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.113983581Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.117282829Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-06T22:49:00.117287723Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 417834244,
  "prompt_eval_count": 81,
  "eval_count": 66
}
```
