# ollama_generate_stream_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.42.18

## Demo

```bash
ollama_generate_stream_json "gpt-oss:20b" "Describe a rabbit in 3 words"

```
```json
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.226635242Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.226662205Z",
  "response": "",
  "thinking": "The",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.22667041Z",
  "response": "",
  "thinking": " user",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.227767447Z",
  "response": "",
  "thinking": " wants",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.227777777Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.227785425Z",
  "response": "",
  "thinking": " description",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.228960628Z",
  "response": "",
  "thinking": " of",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.22896935Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.228975185Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.228981532Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.231886693Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.23189775Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.23190429Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.231911851Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.231917627Z",
  "response": "",
  "thinking": " That's",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.232619118Z",
  "response": "",
  "thinking": " straightforward",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.232626894Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.232854844Z",
  "response": "",
  "thinking": " pick",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.233861238Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.23579699Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.235810704Z",
  "response": "",
  "thinking": " descriptive",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.239012129Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.242195488Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.246058945Z",
  "response": "",
  "thinking": " Maybe",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.250223139Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.255090179Z",
  "response": "",
  "thinking": "fl",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.259558776Z",
  "response": "",
  "thinking": "uffy",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.26567785Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.268990501Z",
  "response": "",
  "thinking": " swift",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.275425669Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.278592731Z",
  "response": "",
  "thinking": " curious",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.282148238Z",
  "response": "",
  "thinking": "\",",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.286996546Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.291119471Z",
  "response": "",
  "thinking": "soft",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.297324939Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.30085247Z",
  "response": "",
  "thinking": " nim",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.305706361Z",
  "response": "",
  "thinking": "ble",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.309771615Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.31865536Z",
  "response": "",
  "thinking": " playful",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.320007223Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.328601803Z",
  "response": "",
  "thinking": " Something",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.328616264Z",
  "response": "",
  "thinking": " like",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.333989339Z",
  "response": "",
  "thinking": " that",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.33689951Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.341925384Z",
  "response": "",
  "thinking": " Or",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.345954011Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.352663975Z",
  "response": "",
  "thinking": "pl",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.356730982Z",
  "response": "",
  "thinking": "ush",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.359624533Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.363890249Z",
  "response": "",
  "thinking": " quick",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.36974207Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.373680287Z",
  "response": "",
  "thinking": " alert",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.377863971Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.381761717Z",
  "response": "",
  "thinking": " We",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.390530562Z",
  "response": "",
  "thinking": " should",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.390811246Z",
  "response": "",
  "thinking": " produce",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.39525245Z",
  "response": "",
  "thinking": " an",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.399817043Z",
  "response": "",
  "thinking": " answer",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.404873054Z",
  "response": "",
  "thinking": " with",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.409325062Z",
  "response": "",
  "thinking": " exactly",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.413210783Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.418308958Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.422633672Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.427367448Z",
  "response": "",
  "thinking": " describing",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.432604651Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.435985744Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.440317633Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.444953815Z",
  "response": "",
  "thinking": " Probably",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.449840858Z",
  "response": "",
  "thinking": " no",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.454591163Z",
  "response": "",
  "thinking": " additional",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.459070023Z",
  "response": "",
  "thinking": " punctuation",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.466879677Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.466892256Z",
  "response": "",
  "thinking": " Let's",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.474043018Z",
  "response": "",
  "thinking": " output",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.478069164Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.480846783Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.484865809Z",
  "response": "",
  "thinking": "Fl",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.489296235Z",
  "response": "",
  "thinking": "uffy",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.493912887Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.499261078Z",
  "response": "",
  "thinking": " swift",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.5044102Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.510208767Z",
  "response": "",
  "thinking": " curious",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.512860508Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.517008507Z",
  "response": "",
  "thinking": " I'll",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.521378553Z",
  "response": "",
  "thinking": " produce",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.526437158Z",
  "response": "",
  "thinking": " that",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.530490961Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.56392549Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.574107976Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.574119005Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.58577922Z",
  "response": " swift",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.585791756Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.629037817Z",
  "response": " curious",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.643802518Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:58.64380826Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 630509824,
  "prompt_eval_count": 81,
  "eval_count": 102
}
```

## Demo Debug

```bash
OLLAMA_LIB_DEBUG=1 ollama_generate_stream_json "gpt-oss:20b" "Describe a rabbit in 3 words"

```
```json
[DEBUG] 21:35:59:140836800: ollama_generate_stream_json: [gpt-oss:20b] [Describe a rabbit in 3 words]
[DEBUG] 21:35:59:151752700: ollama_generate_json: [gpt-oss:20b] [Describe a rabbit in 3 words]
[DEBUG] 21:35:59:162839500: ollama_generate_json: OLLAMA_LIB_STREAM: 1
[DEBUG] 21:35:59:186876800: ollama_api_post: [/api/generate] [{"model":"gpt-oss:20b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 21:35:59:197206000: _call_curl: [POST] [/api/generate] [{"model":"gpt-oss:20b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 21:35:59:211931300: _call_curl: OLLAMA_LIB_API: https://ollama.com
[DEBUG] 21:35:59:223769900: _call_curl: Turbo Mode
[DEBUG] 21:35:59:235862500: _call_curl: adding json body: [{"model":"gpt-oss:20b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 21:36:00:149424300: ollama_api_post: success: return 0
[DEBUG] 21:36:00:160347400: ollama_generate_json: success: return: 0
[DEBUG] 21:36:00:170963200: ollama_generate_stream_json: return: 0
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.661219971Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.661244546Z",
  "response": "",
  "thinking": "We",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.661255089Z",
  "response": "",
  "thinking": " must",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.66126223Z",
  "response": "",
  "thinking": " comply",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.661267906Z",
  "response": "",
  "thinking": " with",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.661273536Z",
  "response": "",
  "thinking": " Open",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.66127852Z",
  "response": "",
  "thinking": "AI",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.661283506Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.661288846Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.661293453Z",
  "response": "",
  "thinking": " No",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.662860705Z",
  "response": "",
  "thinking": " problem",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.662869311Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.662917939Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.664026266Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.664046133Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.665760493Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.665769597Z",
  "response": "",
  "thinking": " description",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.665776641Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.665782936Z",
  "response": "",
  "thinking": " Let's",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.666033157Z",
  "response": "",
  "thinking": " output",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.666042378Z",
  "response": "",
  "thinking": " them",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.666048228Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.707217623Z",
  "response": "Soft",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.707228011Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.707234617Z",
  "response": " swift",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.712163527Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.712503533Z",
  "response": " curious",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.717857935Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.722423016Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:20b",
  "created_at": "2025-08-07T19:35:59.72243021Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 290831045,
  "prompt_eval_count": 81,
  "eval_count": 37
}
```
