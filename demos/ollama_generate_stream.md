# ollama_generate_stream
A demo of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.38.0

## Demo

```bash
ollama_generate_stream "deepcoder:1.5b" "Describe a rabbit in 2 short sentences"
```
```json
<think>Okay, so I need to describe a rabbit. Hmm, the user wants it in two short sentences. Let me think about how to approach this.First, maybe start by thinking about what makes a rabbit different from other animals. Rabbits are known for their agility and speed. That's probably a good point to include. Also, they often climb trees because of that speed. So perhaps mention their agility and climbing abilities.Next, I should think about the characteristics that make them unique. Rabbits have four legs, which is common in mammals. They're typically brown with white patches, so maybe describe that as part of their appearance. Also, they can jump really high, which is another key feature.Now, thinking about how to structure these sentences. The first sentence should set the scene, maybe talking about their shape or movement. The second sentence could delve into their specific traits like color and jumping ability.Putting it together: "A swift and agile rabbit with four legs and a white spot on its back, known for its climbing abilities." That covers the speed and appearance part.Then for the next sentence: "Its bright brown coloration contrasts with its sharp eyes, making it an excellent companion." This adds more details about their appearance and personality.Wait, is that two sentences? Yes. So maybe combine some parts. Alternatively, think if there's a better way to phrase it. Maybe first mention the shape and movement, then specifics about color and eyes.Let me try again: "A swift rabbit with four legs and a white spot on its back, known for its agility and climbing skills." First sentence covers speed and appearance.Second sentence: "With bright brown fur and sharp eyes, this friendly companion is perfect for any situation." That also includes the coloration and personality aspect.I think that works. It's concise and covers both movement and characteristics of a rabbit.</think>A swift rabbit with four legs and a white spot on its back, known for its agility and climbing skills. With bright brown fur and sharp eyes, this friendly companion is perfect for any situation.```

## Demo Debug

```bash
`OLLAMA_LIB_DEBUG=1 ollama_generate_stream "deepcoder:1.5b" "Describe a rabbit in 2 short sentences"`
```
```json
[DEBUG] ollama_generate_stream: [deepcoder:1.5b] [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_generate_json: [deepcoder:1.5b] [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_generate_json: OLLAMA_LIB_STREAM: 1
[DEBUG] json_safe_value: 15 bytes [deepcoder:1.5b]
[DEBUG] json_safe_value: 39 bytes [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_api_post: [/api/generate] [{"model":"deepcoder:1.5b","prompt":"Describe a rabbit in 2 short sentences"}]
[DEBUG] ollama_api_post: return 0
[DEBUG] ollama_generate_json: return: 0
[DEBUG] jq_sanitize: 114 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:13.797268Z","response":"\u003cthink\u003e","done":false}]
<think>[DEBUG] jq_sanitize: 99 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:13.813778Z","response":"
","done":false}]
[DEBUG] jq_sanitize: 104 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:13.830242Z","response":"Alright","done":false}]
Alright[DEBUG] jq_sanitize: 98 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:13.847143Z","response":",","done":false}]
,[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:13.864841Z","response":" so","done":false}]
 so[DEBUG] jq_sanitize: 101 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:13.883466Z","response":" the","done":false}]
 the[DEBUG] jq_sanitize: 101 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:13.90307Z","response":" user","done":false}]
 user[DEBUG] jq_sanitize: 103 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:13.923631Z","response":" wants","done":false}]
 wants[DEBUG] jq_sanitize: 98 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:13.9429Z","response":" me","done":false}]
 me[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:13.960472Z","response":" to","done":false}]
 to[DEBUG] jq_sanitize: 106 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:13.977313Z","response":" describe","done":false}]
 describe[DEBUG] jq_sanitize: 99 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:13.993622Z","response":" a","done":false}]
 a[DEBUG] jq_sanitize: 104 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.009734Z","response":" rabbit","done":false}]
 rabbit[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.025846Z","response":" in","done":false}]
 in[DEBUG] jq_sanitize: 101 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.041736Z","response":" two","done":false}]
 two[DEBUG] jq_sanitize: 103 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.057657Z","response":" short","done":false}]
 short[DEBUG] jq_sanitize: 107 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.073576Z","response":" sentences","done":false}]
 sentences[DEBUG] jq_sanitize: 98 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.089459Z","response":".","done":false}]
.[DEBUG] jq_sanitize: 101 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.105315Z","response":" Let","done":false}]
 Let[DEBUG] jq_sanitize: 99 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.121065Z","response":"'s","done":false}]
's[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.13695Z","response":" see","done":false}]
 see[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.152754Z","response":"...","done":false}]
...[DEBUG] jq_sanitize: 99 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.168696Z","response":" I","done":false}]
 I[DEBUG] jq_sanitize: 101 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.18456Z","response":" need","done":false}]
 need[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.200511Z","response":" to","done":false}]
 to[DEBUG] jq_sanitize: 102 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.216348Z","response":" make","done":false}]
 make[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.232263Z","response":" it","done":false}]
 it[DEBUG] jq_sanitize: 105 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.248226Z","response":" concise","done":false}]
 concise[DEBUG] jq_sanitize: 101 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.264164Z","response":" and","done":false}]
 and[DEBUG] jq_sanitize: 105 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.280153Z","response":" capture","done":false}]
 capture[DEBUG] jq_sanitize: 101 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.296065Z","response":" its","done":false}]
 its[DEBUG] jq_sanitize: 105 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.312076Z","response":" essence","done":false}]
 essence[DEBUG] jq_sanitize: 98 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.327987Z","response":".","done":false}]
.[DEBUG] jq_sanitize: 103 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.343973Z","response":" First","done":false}]
 First[DEBUG] jq_sanitize: 106 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.359897Z","response":" sentence","done":false}]
 sentence[DEBUG] jq_sanitize: 98 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.375854Z","response":":","done":false}]
:[DEBUG] jq_sanitize: 103 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.391834Z","response":" Maybe","done":false}]
 Maybe[DEBUG] jq_sanitize: 102 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.40777Z","response":" focus","done":false}]
 focus[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.423722Z","response":" on","done":false}]
 on[DEBUG] jq_sanitize: 101 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.439709Z","response":" its","done":false}]
 its[DEBUG] jq_sanitize: 101 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.455772Z","response":" fur","done":false}]
 fur[DEBUG] jq_sanitize: 103 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.471902Z","response":" color","done":false}]
 color[DEBUG] jq_sanitize: 98 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.487802Z","response":",","done":false}]
,[DEBUG] jq_sanitize: 101 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.503783Z","response":" how","done":false}]
 how[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.519713Z","response":" it","done":false}]
 it[DEBUG] jq_sanitize: 99 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.535697Z","response":"'s","done":false}]
's[DEBUG] jq_sanitize: 103 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.55169Z","response":" fluffy","done":false}]
 fluffy[DEBUG] jq_sanitize: 99 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.5677Z","response":" yet","done":false}]
 yet[DEBUG] jq_sanitize: 103 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.583621Z","response":" light","done":false}]
 light[DEBUG] jq_sanitize: 106 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.599423Z","response":" compared","done":false}]
 compared[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.615347Z","response":" to","done":false}]
 to[DEBUG] jq_sanitize: 104 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.631178Z","response":" others","done":false}]
 others[DEBUG] jq_sanitize: 98 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.647123Z","response":".","done":false}]
.[DEBUG] jq_sanitize: 104 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.663064Z","response":" Second","done":false}]
 Second[DEBUG] jq_sanitize: 106 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.679056Z","response":" sentence","done":false}]
 sentence[DEBUG] jq_sanitize: 103 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.695047Z","response":" could","done":false}]
 could[DEBUG] jq_sanitize: 102 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.710977Z","response":" talk","done":false}]
 talk[DEBUG] jq_sanitize: 103 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.726926Z","response":" about","done":false}]
 about[DEBUG] jq_sanitize: 101 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.743121Z","response":" its","done":false}]
 its[DEBUG] jq_sanitize: 106 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.759643Z","response":" behavior","done":false}]
 behavior[DEBUG] jq_sanitize: 97 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.77568Z","response":",","done":false}]
,[DEBUG] jq_sanitize: 105 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.791712Z","response":" perhaps","done":false}]
 perhaps[DEBUG] jq_sanitize: 107 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.807616Z","response":" something","done":false}]
 something[DEBUG] jq_sanitize: 102 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.824183Z","response":" like","done":false}]
 like[DEBUG] jq_sanitize: 103 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.840243Z","response":" being","done":false}]
 being[DEBUG] jq_sanitize: 106 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.856199Z","response":" friendly","done":false}]
 friendly[DEBUG] jq_sanitize: 105 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.872162Z","response":" despite","done":false}]
 despite[DEBUG] jq_sanitize: 103 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.888108Z","response":" being","done":false}]
 being[DEBUG] jq_sanitize: 103 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.904072Z","response":" small","done":false}]
 small[DEBUG] jq_sanitize: 98 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.920428Z","response":".","done":false}]
.[DEBUG] jq_sanitize: 102 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.936417Z","response":" That","done":false}]
 That[DEBUG] jq_sanitize: 104 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.952639Z","response":" should","done":false}]
 should[DEBUG] jq_sanitize: 103 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.968867Z","response":" cover","done":false}]
 cover[DEBUG] jq_sanitize: 102 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:14.984776Z","response":" both","done":false}]
 both[DEBUG] jq_sanitize: 105 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.000746Z","response":" aspects","done":false}]
 aspects[DEBUG] jq_sanitize: 109 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.016712Z","response":" effectively","done":false}]
 effectively[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.032681Z","response":".
","done":false}]
.[DEBUG] jq_sanitize: 115 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.048599Z","response":"\u003c/think\u003e","done":false}]
</think>[DEBUG] jq_sanitize: 101 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.064579Z","response":"

","done":false}]
[DEBUG] jq_sanitize: 98 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.080495Z","response":"A","done":false}]
A[DEBUG] jq_sanitize: 104 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.096498Z","response":" fluffy","done":false}]
 fluffy[DEBUG] jq_sanitize: 103 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.112404Z","response":" white","done":false}]
 white[DEBUG] jq_sanitize: 103 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.12842Z","response":" rabbit","done":false}]
 rabbit[DEBUG] jq_sanitize: 102 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.144319Z","response":" with","done":false}]
 with[DEBUG] jq_sanitize: 102 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.160284Z","response":" soft","done":false}]
 soft[DEBUG] jq_sanitize: 101 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.176249Z","response":" fur","done":false}]
 fur[DEBUG] jq_sanitize: 101 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.19226Z","response":" that","done":false}]
 that[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.208222Z","response":" gl","done":false}]
 gl[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.224238Z","response":"ows","done":false}]
ows[DEBUG] jq_sanitize: 103 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.240205Z","response":" under","done":false}]
 under[DEBUG] jq_sanitize: 101 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.256184Z","response":" the","done":false}]
 the[DEBUG] jq_sanitize: 102 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.272149Z","response":" moon","done":false}]
 moon[DEBUG] jq_sanitize: 102 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.288187Z","response":"light","done":false}]
light[DEBUG] jq_sanitize: 98 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.304123Z","response":",","done":false}]
,[DEBUG] jq_sanitize: 101 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.320114Z","response":" and","done":false}]
 and[DEBUG] jq_sanitize: 99 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.336065Z","response":" a","done":false}]
 a[DEBUG] jq_sanitize: 104 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.352082Z","response":" gentle","done":false}]
 gentle[DEBUG] jq_sanitize: 102 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.368094Z","response":" chir","done":false}]
 chir[DEBUG] jq_sanitize: 98 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.384052Z","response":"p","done":false}]
p[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.400078Z","response":" as","done":false}]
 as[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.416021Z","response":" it","done":false}]
 it[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.432077Z","response":" me","done":false}]
 me[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.448035Z","response":"ows","done":false}]
ows[DEBUG] jq_sanitize: 104 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.464116Z","response":" softly","done":false}]
 softly[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.480426Z","response":" in","done":false}]
 in[DEBUG] jq_sanitize: 101 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.496894Z","response":" the","done":false}]
 the[DEBUG] jq_sanitize: 103 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.513103Z","response":" quiet","done":false}]
 quiet[DEBUG] jq_sanitize: 104 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.529489Z","response":" corner","done":false}]
 corner[DEBUG] jq_sanitize: 100 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.545573Z","response":" of","done":false}]
 of[DEBUG] jq_sanitize: 101 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.561536Z","response":" the","done":false}]
 the[DEBUG] jq_sanitize: 102 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.577519Z","response":" room","done":false}]
 room[DEBUG] jq_sanitize: 98 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.593522Z","response":".","done":false}]
.[DEBUG] jq_sanitize: 865 bytes [{"model":"deepcoder:1.5b","created_at":"2025-07-29T17:57:15.609564Z","response":"","done":true,"done_reason":"stop","context":[151644,74785,264,38724,304,220,17,2805,22870,151645,151648,198,71486,11,773,279,1196,6801,752,311,7512,264,38724,304,1378,2805,22870,13,6771,594,1490,1112,358,1184,311,1281,432,63594,323,12322,1181,27491,13,5512,11652,25,10696,5244,389,1181,18241,1894,11,1246,432,594,67561,3602,3100,7707,311,3800,13,10440,11652,1410,3061,911,1181,7709,11,8365,2494,1075,1660,11657,8818,1660,2613,13,2938,1265,3421,2176,13566,13444,624,151649,271,32,67561,4158,38724,448,8413,18241,429,2770,4241,1212,279,17788,4145,11,323,264,21700,70446,79,438,432,752,4241,56050,304,279,11340,9131,315,279,3054,13],"total_duration":1890714583,"load_duration":54398916,"prompt_eval_count":11,"prompt_eval_duration":22318000,"eval_count":113,"eval_duration":1813435083}]
[DEBUG] ollama_generate_stream: return: 0
```
