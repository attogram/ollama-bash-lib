# ollama_generate_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.40.12

## Demo

```bash
ollama_generate_json "deepseek-r1:1.5b" "Describe a rabbit in 2 short sentences"
```
```json
{"model":"deepseek-r1:1.5b","created_at":"2025-07-31T21:04:01.759141Z","response":"\u003cthink\u003e\nOkay, so the user wants me to describe a rabbit in two short sentences. Hmm, let's see... I remember rabbits are often called \"the wonderland animal.\" That's catchy and descriptive. \n\nNow, thinking about their characteristics: they're quick-witted and curious. That makes sense because as kids learn about them, they might ask why they can fly or how to catch them. \n\nI should make sure the sentences flow well and capture that playful aspect. Maybe start with something general like being quick and quirky, then transition into the unique traits of a rabbit. Yeah, that sounds good. Let me put it together and check if both sentences are concise and convey the correct information.\n\u003c/think\u003e\n\nA quick-witted, curious rabbit is often called \"the wonderland animal.\" They’re cleverly flighty, curious about everything, though they're hard to catch without a net!","done":true,"done_reason":"stop","context":[151644,74785,264,38724,304,220,17,2805,22870,151645,151648,198,32313,11,773,279,1196,6801,752,311,7512,264,38724,304,1378,2805,22870,13,88190,11,1077,594,1490,1112,358,6099,69144,525,3545,2598,330,1782,5775,1933,9864,1189,2938,594,85505,323,52844,13,4710,7039,11,7274,911,862,17452,25,807,2299,3974,2630,3762,323,22208,13,2938,3643,5530,1576,438,6837,3960,911,1105,11,807,2578,2548,3170,807,646,11466,476,1246,311,2287,1105,13,4710,40,1265,1281,2704,279,22870,6396,1632,323,12322,429,56069,12893,13,10696,1191,448,2494,4586,1075,1660,3974,323,67132,11,1221,9142,1119,279,4911,24055,315,264,38724,13,21607,11,429,10362,1661,13,6771,752,2182,432,3786,323,1779,421,2176,22870,525,63594,323,20001,279,4396,1995,624,151649,271,32,3974,2630,3762,11,22208,38724,374,3545,2598,330,1782,5775,1933,9864,1189,2379,3129,27699,398,10971,88,11,22208,911,4297,11,3498,807,2299,2588,311,2287,2041,264,4179,0],"total_duration":4366095500,"load_duration":1214881791,"prompt_eval_count":11,"prompt_eval_duration":167521541,"eval_count":181,"eval_duration":2983066834}
```

## Demo Debug

```bash
`OLLAMA_LIB_DEBUG=1 ollama_generate_json "deepseek-r1:1.5b" "Describe a rabbit in 2 short sentences"`
```
```json
[DEBUG] ollama_generate_json: [deepseek-r1:1.5b] [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_generate_json: OLLAMA_LIB_STREAM: 0
[DEBUG] json_clean: 17 bytes [deepseek-r1:1.5b]
[DEBUG] json_clean: 39 bytes [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_api_post: [/api/generate] [{"model":"deepseek-r1:1.5b","prompt":"Desc]
{"model":"deepseek-r1:1.5b","created_at":"2025-07-31T21:04:09.163459Z","response":"\u003cthink\u003e\nOkay, so I need to describe a rabbit in two short sentences. Hmm, let's see... First, I should probably think about the characteristics of a rabbit. They're known for their fluffy fur and their ability to hop around. They have long ears and a little eye on their head like a cat, but that's not quite right—maybe they have no eyes? Or maybe they can look around easily since they're small.\n\nWait, rabbits do need vision, though. They can usually see things up close without much trouble. That's an important point because people sometimes confuse them with other animals, especially those that require more alertness for navigation.\n\nSo for the first sentence, I should focus on their appearance and behavior. Maybe something about their fur being white or brown and how they hop around in their den. The second part can talk about their ears, maybe saying they have long ones but no eyes? Or perhaps mention that their skin is smooth, which is another characteristic.\n\nLet me piece this together: First sentence could be about the rabbit's appearance—white fur, brown fur, hopping, living in a den. Second sentence could focus on their physiology—the hind legs for hopping, long ears, lack of eye on head like a cat (but wait, cats do have eyes), maybe rabbits don't need as much visual awareness since they're small. Or perhaps just mention that rabbits have four legs but no eyes.\n\nWait, the assistant's response had \"hopping and burrowing\" in the first sentence, which makes sense because rabbits do both—like in a burrow or hopping around. So that covers their behavior. For the second sentence, talking about their ears as long and pointing out that they don't have an eye on their head, but maybe also noting their smooth skin and how they live in a den.\n\nI think that's a good structure: two sentences, each covering different aspects—appearance and physiology. That should make it concise and informative.\n\u003c/think\u003e\n\nA rabbit with fluffy white fur hoppers around in their den, while its long ears point to the ground as it burrows silently in the grass.","done":true,"done_reason":"stop","context":[151644,74785,264,38724,304,220,17,2805,22870,151645,151648,198,32313,11,773,358,1184,311,7512,264,38724,304,1378,2805,22870,13,88190,11,1077,594,1490,1112,5512,11,358,1265,4658,1744,911,279,17452,315,264,38724,13,2379,2299,3881,369,862,67561,18241,323,862,5726,311,7446,2163,13,2379,614,1293,24230,323,264,2632,7912,389,862,1968,1075,264,8251,11,714,429,594,537,5008,1290,2293,36760,807,614,902,6414,30,2521,7196,807,646,1401,2163,6707,2474,807,2299,2613,382,14190,11,69144,653,1184,11129,11,3498,13,2379,646,5990,1490,2513,705,3265,2041,1753,12264,13,2938,594,458,2989,1459,1576,1251,7025,58117,1105,448,1008,9898,11,5310,1846,429,1373,803,5115,2090,369,10646,382,4416,369,279,1156,11652,11,358,1265,5244,389,862,11094,323,7709,13,10696,2494,911,862,18241,1660,4158,476,13876,323,1246,807,7446,2163,304,862,3371,13,576,2086,949,646,3061,911,862,24230,11,7196,5488,807,614,1293,6174,714,902,6414,30,2521,8365,6286,429,862,6787,374,10876,11,892,374,2441,28583,382,10061,752,6573,419,3786,25,5512,11652,1410,387,911,279,38724,594,11094,2293,5782,18241,11,13876,18241,11,92238,11,5382,304,264,3371,13,10440,11652,1410,5244,389,862,77052,21677,47319,14201,369,92238,11,1293,24230,11,6853,315,7912,389,1968,1075,264,8251,320,8088,3783,11,19423,653,614,6414,701,7196,69144,1513,944,1184,438,1753,9124,17526,2474,807,2299,2613,13,2521,8365,1101,6286,429,69144,614,3040,14201,714,902,6414,382,14190,11,279,17847,594,2033,1030,330,71,7008,323,7795,24181,1,304,279,1156,11652,11,892,3643,5530,1576,69144,653,2176,2293,4803,304,264,7795,651,476,92238,2163,13,2055,429,14521,862,7709,13,1752,279,2086,11652,11,7404,911,862,24230,438,1293,323,21633,700,429,807,1513,944,614,458,7912,389,862,1968,11,714,7196,1083,26305,862,10876,6787,323,1246,807,3887,304,264,3371,382,40,1744,429,594,264,1661,5944,25,1378,22870,11,1817,18202,2155,13566,2293,96655,323,77052,13,2938,1265,1281,432,63594,323,38219,624,151649,271,32,38724,448,67561,4158,18241,305,31442,2163,304,862,3371,11,1393,1181,1293,24230,1459,311,279,4910,438,432,7795,1811,49394,304,279,16359,13],"total_duration":7311974625,"load_duration":49234125,"prompt_eval_count":11,"prompt_eval_duration":17087750,"eval_count":431,"eval_duration":7245251583}[DEBUG] ollama_api_post: return 0
[DEBUG] ollama_generate_json: return: 0

```
