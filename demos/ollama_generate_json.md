# ollama_generate_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.40.0

## Demo

```bash
ollama_generate_json "deepseek-r1:14b" "Describe a rabbit in 2 short sentences"
```
```json
{"model":"deepseek-r1:14b","created_at":"2025-07-30T21:27:56.481597Z","response":"\u003cthink\u003e\nOkay, so I need to describe a rabbit in two short sentences. Hmm, where do I start? Well, rabbits are small animals, right? They have soft fur and long ears. Oh yeah, and their hind legs are longer than their front ones. That's something I remember from when I saw them at the park.\n\nWait, they also have whiskers, which I think help them with sensing things around them. And their tails are short and fluffy. Oh, right, and rabbits are usually associated with carrots, though I know they eat a variety of foods besides that. They're pretty cute animals, often kept as pets too. \n\nLet me try to put this together into two sentences. The first sentence could cover their physical characteristics, like size, fur, ears, legs, whiskers, and tail. The second sentence might talk about what they do, like how they move or what they eat. Oh, and maybe mention that they're often kept as pets because they're cute.\n\nWait, let me make sure I don't repeat information. So in the first sentence: small animal, soft fur, long ears, strong hind legs, short front legs, whiskers, and a short fluffy tail. That should cover their physical traits.\n\nIn the second sentence: They hop quickly on their hind legs, eat vegetables (like carrots), and are popular as pets because they're cute. Yeah, that sounds good.\n\nI think I'm ready to write the two sentences now.\n\u003c/think\u003e\n\nA rabbit is a small animal with soft fur, long ears, strong hind legs, short front legs, whiskers, and a short fluffy tail. They hop quickly using their hind legs, feed on vegetables such as carrots, and are popular pets due to their adorable appearance.","done":true,"done_reason":"stop","context":[151644,74785,264,38724,304,220,17,2805,22870,151645,151648,198,32313,11,773,358,1184,311,7512,264,38724,304,1378,2805,22870,13,88190,11,1380,653,358,1191,30,8325,11,69144,525,2613,9898,11,1290,30,2379,614,8413,18241,323,1293,24230,13,8670,21639,11,323,862,47319,14201,525,5021,1091,862,4065,6174,13,2938,594,2494,358,6099,504,979,358,5485,1105,518,279,6118,382,14190,11,807,1083,614,40659,388,11,892,358,1744,1492,1105,448,59099,2513,2163,1105,13,1597,862,63514,525,2805,323,67561,13,8670,11,1290,11,323,69144,525,5990,5815,448,61417,11,3498,358,1414,807,8180,264,8045,315,15298,27758,429,13,2379,2299,5020,18838,9898,11,3545,8604,438,25103,2238,13,4710,10061,752,1430,311,2182,419,3786,1119,1378,22870,13,576,1156,11652,1410,3421,862,6961,17452,11,1075,1379,11,18241,11,24230,11,14201,11,40659,388,11,323,9787,13,576,2086,11652,2578,3061,911,1128,807,653,11,1075,1246,807,3271,476,1128,807,8180,13,8670,11,323,7196,6286,429,807,2299,3545,8604,438,25103,1576,807,2299,18838,382,14190,11,1077,752,1281,2704,358,1513,944,13153,1995,13,2055,304,279,1156,11652,25,2613,9864,11,8413,18241,11,1293,24230,11,3746,47319,14201,11,2805,4065,14201,11,40659,388,11,323,264,2805,67561,9787,13,2938,1265,3421,862,6961,24055,382,641,279,2086,11652,25,2379,7446,6157,389,862,47319,14201,11,8180,23880,320,4803,61417,701,323,525,5411,438,25103,1576,807,2299,18838,13,21607,11,429,10362,1661,382,40,1744,358,2776,5527,311,3270,279,1378,22870,1431,624,151649,271,32,38724,374,264,2613,9864,448,8413,18241,11,1293,24230,11,3746,47319,14201,11,2805,4065,14201,11,40659,388,11,323,264,2805,67561,9787,13,2379,7446,6157,1667,862,47319,14201,11,5395,389,23880,1741,438,61417,11,323,525,5411,25103,4152,311,862,40608,11094,13],"total_duration":49520196625,"load_duration":5584952291,"prompt_eval_count":11,"prompt_eval_duration":6276246417,"eval_count":359,"eval_duration":37655665125}
```

## Demo Debug

```bash
`OLLAMA_LIB_DEBUG=1 ollama_generate_json "deepseek-r1:14b" "Describe a rabbit in 2 short sentences"`
```
```json
[DEBUG] ollama_generate_json: [deepseek-r1:14b] [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_generate_json: OLLAMA_LIB_STREAM: 0
[DEBUG] json_clean: 16 bytes [deepseek-r1:14b]
[DEBUG] json_clean: 39 bytes [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_api_post: [/api/generate] [{"model":"deepseek-r1:14b","prompt":"Descr]
{"model":"deepseek-r1:14b","created_at":"2025-07-30T21:28:24.682643Z","response":"\u003cthink\u003e\nOkay, so I need to describe a rabbit in two short sentences. Hmm, where do I start? Well, I know rabbits are small animals, but I should be more specific. They have fur and long earsâ€”that's for sure. Oh, and they also have those cute little legs that make them hop. Wait, how else can I put that?\n\nMaybe the first sentence could focus on their physical characteristics: small mammals with soft fur, long ears, and strong hind legs for hopping. That sounds good. Now, what about their behavior or habitat? Rabbits are often seen in meadows or forests, but they're also popular as pets because they're cute and sometimes kept in cages. So the second sentence could mention that they're commonly found in certain habitats and are beloved as pets.\n\nWait, I should make sure each sentence is concise and not too wordy. Let me try to structure it better. Maybe the first sentence about their physical traits and the second about where they live and their popularity as pets. Yeah, that makes sense.\n\u003c/think\u003e\n\nRabbits are small mammals known for their soft fur, long ears, and strong hind legs adapted for hopping. They can be found in various habitats like meadows and forests, and are also popular as affectionate pets kept in homes around the world.","done":true,"done_reason":"stop","context":[151644,74785,264,38724,304,220,17,2805,22870,151645,151648,198,32313,11,773,358,1184,311,7512,264,38724,304,1378,2805,22870,13,88190,11,1380,653,358,1191,30,8325,11,358,1414,69144,525,2613,9898,11,714,358,1265,387,803,3151,13,2379,614,18241,323,1293,24230,40028,594,369,2704,13,8670,11,323,807,1083,614,1846,18838,2632,14201,429,1281,1105,7446,13,13824,11,1246,770,646,358,2182,429,1939,21390,279,1156,11652,1410,5244,389,862,6961,17452,25,2613,55569,448,8413,18241,11,1293,24230,11,323,3746,47319,14201,369,92238,13,2938,10362,1661,13,4695,11,1128,911,862,7709,476,38546,30,35724,11516,525,3545,3884,304,752,21060,476,35558,11,714,807,2299,1083,5411,438,25103,1576,807,2299,18838,323,7025,8604,304,80847,13,2055,279,2086,11652,1410,6286,429,807,2299,16626,1730,304,3654,70599,323,525,27430,438,25103,382,14190,11,358,1265,1281,2704,1817,11652,374,63594,323,537,2238,3409,88,13,6771,752,1430,311,5944,432,2664,13,10696,279,1156,11652,911,862,6961,24055,323,279,2086,911,1380,807,3887,323,862,22538,438,25103,13,21607,11,429,3643,5530,624,151649,271,49,370,11516,525,2613,55569,3881,369,862,8413,18241,11,1293,24230,11,323,3746,47319,14201,29364,369,92238,13,2379,646,387,1730,304,5257,70599,1075,752,21060,323,35558,11,323,525,1083,5411,438,36705,349,25103,8604,304,10415,2163,279,1879,13],"total_duration":28107654750,"load_duration":67282750,"prompt_eval_count":11,"prompt_eval_duration":104035583,"eval_count":267,"eval_duration":27935620875}[DEBUG] ollama_api_post: return 0
[DEBUG] ollama_generate_json: return: 0

```
