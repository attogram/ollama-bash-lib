# ollama_generate_json

A demo of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.39.1

## Demo

```bash
ollama_generate_json "qwen3:8b" "Describe a rabbit in 2 short sentences"
```
```json
{"model":"qwen3:8b","created_at":"2025-07-30T10:42:42.486184Z","response":"\u003cthink\u003e\nOkay, the user wants me to describe a rabbit in two short sentences. Let me start by thinking about the key characteristics of a rabbit. They're known for their long ears, fluffy tails, and hopping movement. Maybe mention their soft fur and gentle nature. I should keep each sentence concise. First sentence could focus on physical appearance: \"A rabbit is a small, fluffy mammal with long ears and a quick, twitching nose.\" That covers the main features. For the second sentence, maybe talk about their behavior: \"They hop gracefully on slender legs, often darting away when startled.\" That adds movement and behavior. Let me check if that's two sentences and if they're short enough. Yeah, each is a complete thought without unnecessary details. I think that works.\n\u003c/think\u003e\n\nA rabbit is a small, fluffy mammal with long ears and a quick, twitching nose. They hop gracefully on slender legs, often darting away when startled.","done":true,"done_reason":"stop","context":[151644,872,198,74785,264,38724,304,220,17,2805,22870,151645,198,151644,77091,198,151667,198,32313,11,279,1196,6801,752,311,7512,264,38724,304,1378,2805,22870,13,6771,752,1191,553,7274,911,279,1376,17452,315,264,38724,13,2379,2299,3881,369,862,1293,24230,11,67561,63514,11,323,92238,7203,13,10696,6286,862,8413,18241,323,21700,6993,13,358,1265,2506,1817,11652,63594,13,5512,11652,1410,5244,389,6961,11094,25,330,32,38724,374,264,2613,11,67561,34941,278,448,1293,24230,323,264,3974,11,59413,287,19142,1189,2938,14521,279,1887,4419,13,1752,279,2086,11652,11,7196,3061,911,862,7709,25,330,6865,7446,78499,389,72242,14201,11,3545,55967,287,3123,979,88715,1189,2938,11367,7203,323,7709,13,6771,752,1779,421,429,594,1378,22870,323,421,807,2299,2805,3322,13,21607,11,1817,374,264,4583,3381,2041,25165,3565,13,358,1744,429,4278,624,151668,271,32,38724,374,264,2613,11,67561,34941,278,448,1293,24230,323,264,3974,11,59413,287,19142,13,2379,7446,78499,389,72242,14201,11,3545,55967,287,3123,979,88715,13],"total_duration":15538966125,"load_duration":3485575375,"prompt_eval_count":16,"prompt_eval_duration":505370792,"eval_count":196,"eval_duration":11546943583}
```

## Demo Debug

```bash
`OLLAMA_LIB_DEBUG=1 ollama_generate_json "qwen3:8b" "Describe a rabbit in 2 short sentences"`
```
```json
[DEBUG] ollama_generate_json: [qwen3:8b] [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_generate_json: OLLAMA_LIB_STREAM: 0
[DEBUG] json_safe_value: 9 bytes [qwen3:8b]
[DEBUG] json_safe_value: 39 bytes [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_api_post: [/api/generate] [{"model":"qwen3:8b","prompt":"Describe a rabbit in 2 short sentences","stream":false}]
{"model":"qwen3:8b","created_at":"2025-07-30T10:43:00.128088Z","response":"\u003cthink\u003e\nOkay, the user wants me to describe a rabbit in two short sentences. Let me start by thinking about the key characteristics of a rabbit. They're mammals, have long ears, soft fur, and are known for their hopping movement. Maybe mention their diet, like eating vegetables. Also, they're often seen as cute and gentle. I should keep each sentence concise. First sentence could focus on physical appearance and movement. Second sentence might talk about their behavior or habitat. Let me check if I need to include more details. Maybe mention their role in nature or how they interact with their environment. Wait, the user might want it simple and to the point. Let me make sure each sentence is clear and not too wordy. Alright, first sentence: \"A rabbit is a small, fluffy mammal with long ears and a quick, hopping gait, often found in meadows and gardens.\" Second sentence: \"Known for their gentle nature and curiosity, rabbits primarily eat plants and vegetables, making them a common sight in rural and suburban areas.\" That should cover the basics without being too detailed. Let me double-check the word count and clarity. Yep, that works.\n\u003c/think\u003e\n\nA rabbit is a small, fluffy mammal with long ears and a quick, hopping gait, often found in meadows and gardens. Known for their gentle nature and curiosity, rabbits primarily eat plants and vegetables, making them a common sight in rural and suburban areas.","done":true,"done_reason":"stop","context":[151644,872,198,74785,264,38724,304,220,17,2805,22870,151645,198,151644,77091,198,151667,198,32313,11,279,1196,6801,752,311,7512,264,38724,304,1378,2805,22870,13,6771,752,1191,553,7274,911,279,1376,17452,315,264,38724,13,2379,2299,55569,11,614,1293,24230,11,8413,18241,11,323,525,3881,369,862,92238,7203,13,10696,6286,862,9968,11,1075,12182,23880,13,7281,11,807,2299,3545,3884,438,18838,323,21700,13,358,1265,2506,1817,11652,63594,13,5512,11652,1410,5244,389,6961,11094,323,7203,13,10440,11652,2578,3061,911,862,7709,476,38546,13,6771,752,1779,421,358,1184,311,2924,803,3565,13,10696,6286,862,3476,304,6993,476,1246,807,16282,448,862,4573,13,13824,11,279,1196,2578,1366,432,4285,323,311,279,1459,13,6771,752,1281,2704,1817,11652,374,2797,323,537,2238,3409,88,13,97593,11,1156,11652,25,330,32,38724,374,264,2613,11,67561,34941,278,448,1293,24230,323,264,3974,11,92238,342,1315,11,3545,1730,304,752,21060,323,35436,1189,10440,11652,25,330,48206,369,862,21700,6993,323,40228,11,69144,15503,8180,10779,323,23880,11,3259,1105,264,4185,13929,304,19082,323,45218,5671,1189,2938,1265,3421,279,31774,2041,1660,2238,11682,13,6771,752,1990,15934,279,3409,1760,323,31273,13,84194,11,429,4278,624,151668,271,32,38724,374,264,2613,11,67561,34941,278,448,1293,24230,323,264,3974,11,92238,342,1315,11,3545,1730,304,752,21060,323,35436,13,48286,369,862,21700,6993,323,40228,11,69144,15503,8180,10779,323,23880,11,3259,1105,264,4185,13929,304,19082,323,45218,5671,13],"total_duration":17548575834,"load_duration":63602500,"prompt_eval_count":16,"prompt_eval_duration":95975084,"eval_count":294,"eval_duration":17388311666}[DEBUG] ollama_api_post: return 0
[DEBUG] ollama_generate_json: return: 0

```
