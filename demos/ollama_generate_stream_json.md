# ollama_generate_stream_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.40.0

## Demo

```bash
ollama_generate_stream_json "granite3.3:2b" "Describe a rabbit in 2 short sentences"
```
```json
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:36.891502Z","response":"R","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:36.913808Z","response":"ab","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:36.935748Z","response":"bits","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:36.959426Z","response":" are","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:36.98243Z","response":" small","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.005083Z","response":" to","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.027748Z","response":" medium","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.051151Z","response":"-","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.074597Z","response":"sized","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.097533Z","response":" m","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.120342Z","response":"amm","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.142713Z","response":"als","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.165398Z","response":" known","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.188096Z","response":" for","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.211081Z","response":" their","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.233279Z","response":" long","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.255654Z","response":" e","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.278706Z","response":"ars","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.301907Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.324704Z","response":" fl","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.347505Z","response":"uff","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.370588Z","response":"y","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.39335Z","response":" t","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.416205Z","response":"ails","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.439061Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.462678Z","response":" and","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.485522Z","response":" distinct","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.508266Z","response":"ive","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.53135Z","response":" wh","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.554233Z","response":"isk","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.577004Z","response":"ers","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.600091Z","response":".","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.622888Z","response":" They","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.645642Z","response":" are","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.668439Z","response":" primarily","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.691416Z","response":" her","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.714401Z","response":"b","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.737052Z","response":"iv","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.760048Z","response":"or","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.782914Z","response":"ous","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.805775Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.828511Z","response":" feed","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.851557Z","response":"ing","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.874241Z","response":" on","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.897253Z","response":" a","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.920162Z","response":" di","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.943063Z","response":"et","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.966165Z","response":" of","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:37.989418Z","response":" gr","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.012621Z","response":"asses","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.035657Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.058887Z","response":" leaves","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.082484Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.105621Z","response":" and","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.128609Z","response":" roots","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.151579Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.174713Z","response":" with","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.197827Z","response":" a","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.220876Z","response":" unique","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.243954Z","response":" bur","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.266906Z","response":"row","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.289945Z","response":"ing","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.313075Z","response":" behavior","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.336175Z","response":".","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.359078Z","response":"","done":true,"done_reason":"stop","context":[49152,2946,49153,39558,390,17071,2821,44,30468,225,36,34,36,38,32,203,4282,884,8080,278,659,30,18909,810,25697,32,2448,884,312,17247,19551,47330,32,0,203,49152,496,49153,8591,312,40810,328,225,36,4504,28842,0,203,49152,17594,49153,68,360,5960,884,5532,372,16538,31,41658,345,38169,3528,8967,436,3623,1946,484,4177,30,2022,2966,107,273,1535,30,461,19088,661,640,8247,483,32,11228,884,37897,7791,84,387,271,3291,30,6985,299,544,312,2068,364,432,2914,2515,30,26243,30,461,33032,30,623,312,5799,23598,643,299,5853,32],"total_duration":3101124709,"load_duration":1361854334,"prompt_eval_count":51,"prompt_eval_duration":269293917,"eval_count":65,"eval_duration":1468092250}
```

## Demo Debug

```bash
OLLAMA_LIB_DEBUG=1 ollama_generate_stream_json "granite3.3:2b" "Describe a rabbit in 2 short sentences"
```
```json
[DEBUG] ollama_generate_stream_json: [granite3.3:2b] [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_generate_json: [granite3.3:2b] [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_generate_json: OLLAMA_LIB_STREAM: 1
[DEBUG] json_clean: 14 bytes [granite3.3:2b]
[DEBUG] json_clean: 39 bytes [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_api_post: [/api/generate] [{"model":"granite3.3:2b","prompt":"Describ]
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.510954Z","response":"R","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.53447Z","response":"ab","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.559672Z","response":"bits","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.585669Z","response":" are","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.612371Z","response":" small","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.638937Z","response":" to","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.665011Z","response":" medium","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.691923Z","response":"-","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.718243Z","response":"sized","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.745373Z","response":" m","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.772594Z","response":"amm","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.801291Z","response":"als","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.827147Z","response":" known","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.853723Z","response":" for","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.881399Z","response":" their","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.908041Z","response":" long","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.934091Z","response":" e","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.960718Z","response":"ars","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:38.986475Z","response":" and","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.01313Z","response":" fl","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.040783Z","response":"uff","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.069566Z","response":"y","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.096471Z","response":" t","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.122715Z","response":"ails","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.149043Z","response":".","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.176581Z","response":" They","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.202897Z","response":" are","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.229647Z","response":" her","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.256343Z","response":"b","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.283834Z","response":"iv","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.310875Z","response":"ores","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.336833Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.36398Z","response":" primarily","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.391824Z","response":" gr","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.418383Z","response":"az","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.445108Z","response":"ing","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.471353Z","response":" on","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.498263Z","response":" gr","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.525189Z","response":"asses","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.551582Z","response":" and","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.578392Z","response":" other","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.60463Z","response":" ve","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.631127Z","response":"get","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.657874Z","response":"ation","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.684658Z","response":" with","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.711458Z","response":" their","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.737931Z","response":" powerful","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.764953Z","response":" inc","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.7933Z","response":"is","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.819606Z","response":"ors","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.846572Z","response":".","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-30T21:28:39.87332Z","response":"","done":true,"done_reason":"stop","context":[49152,2946,49153,39558,390,17071,2821,44,30468,225,36,34,36,38,32,203,4282,884,8080,278,659,30,18909,810,25697,32,2448,884,312,17247,19551,47330,32,0,203,49152,496,49153,8591,312,40810,328,225,36,4504,28842,0,203,49152,17594,49153,68,360,5960,884,5532,372,16538,31,41658,345,38169,3528,8967,436,3623,1946,484,4177,461,2022,2966,107,273,1535,32,11228,884,7791,84,387,6845,30,37897,2914,1373,299,544,2914,2515,461,1604,5292,371,367,623,3623,27196,6971,297,1734,32],"total_duration":1421961792,"load_duration":33753667,"prompt_eval_count":51,"prompt_eval_duration":24202208,"eval_count":52,"eval_duration":1362864667}
[DEBUG] ollama_api_post: return 0
[DEBUG] ollama_generate_json: return: 0
[DEBUG] ollama_generate_stream_json: return: 0
```
