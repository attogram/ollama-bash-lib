# ollama_generate_stream_json
A demo of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.38.1

## Demo

```bash
ollama_generate_stream_json "granite3.3:2b" "Describe a rabbit in 2 short sentences"
```
```json
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.584838Z","response":"R","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.607556Z","response":"ab","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.630115Z","response":"bits","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.65249Z","response":" are","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.674796Z","response":" small","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.69712Z","response":" m","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.719591Z","response":"amm","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.742081Z","response":"als","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.764545Z","response":" known","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.786936Z","response":" for","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.809366Z","response":" their","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.831858Z","response":" fl","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.854488Z","response":"uff","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.877051Z","response":"y","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.899834Z","response":" t","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.9226Z","response":"ails","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.945336Z","response":" and","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.968079Z","response":" long","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:52.990766Z","response":" e","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.013764Z","response":"ars","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.036452Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.059123Z","response":" which","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.081764Z","response":" help","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.104401Z","response":" them","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.127127Z","response":" dis","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.149753Z","response":"sip","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.172597Z","response":"ate","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.195247Z","response":" heat","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.217791Z","response":" and","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.24049Z","response":" detect","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.263047Z","response":" pred","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.285573Z","response":"ators","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.308111Z","response":".","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.330664Z","response":" They","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.353173Z","response":" are","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.375769Z","response":" primarily","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.398335Z","response":" her","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.420835Z","response":"b","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.443323Z","response":"iv","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.465814Z","response":"or","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.488298Z","response":"ous","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.510869Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.533425Z","response":" feed","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.556095Z","response":"ing","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.578666Z","response":" on","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.601242Z","response":" a","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.625296Z","response":" variety","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.650348Z","response":" of","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.673382Z","response":" ve","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.699136Z","response":"get","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.722825Z","response":"ables","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.745764Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.768649Z","response":" particularly","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.791567Z","response":" clo","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.814368Z","response":"ver","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.837228Z","response":" and","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.860045Z","response":" gr","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.882769Z","response":"asses","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.905656Z","response":".","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:53.92851Z","response":"","done":true,"done_reason":"stop","context":[49152,2946,49153,39558,390,17071,2821,44,30468,225,36,34,36,38,32,203,4282,884,8080,278,659,30,18909,810,25697,32,2448,884,312,17247,19551,47330,32,0,203,49152,496,49153,8591,312,40810,328,225,36,4504,28842,0,203,49152,17594,49153,68,360,5960,884,5532,345,38169,3528,8967,436,3623,2022,2966,107,273,1535,461,1946,484,4177,30,1510,3049,3026,1214,28778,332,28071,461,11140,4626,4044,32,11228,884,37897,7791,84,387,271,3291,30,6985,299,544,312,26846,432,5292,371,6975,30,27470,7375,424,461,2914,2515,32],"total_duration":3054686167,"load_duration":1406217542,"prompt_eval_count":51,"prompt_eval_duration":301492250,"eval_count":60,"eval_duration":1344529000}

```

## Demo Debug

```bash
`OLLAMA_LIB_DEBUG=1 ollama_generate_stream_json "granite3.3:2b" "Describe a rabbit in 2 short sentences"`
```
```json
[DEBUG] ollama_generate_stream_json: [granite3.3:2b] [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_generate_json: [granite3.3:2b] [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_generate_json: OLLAMA_LIB_STREAM: 1
[DEBUG] json_safe_value: 14 bytes [granite3.3:2b]
[DEBUG] json_safe_value: 39 bytes [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_api_post: [/api/generate] [{"model":"granite3.3:2b","prompt":"Describe a rabbit in 2 short sentences"}]
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.068043Z","response":"R","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.096857Z","response":"ab","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.124205Z","response":"bits","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.150194Z","response":" are","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.176457Z","response":" small","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.202901Z","response":" to","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.228782Z","response":" medium","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.255271Z","response":"-","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.281486Z","response":"sized","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.307264Z","response":" m","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.333119Z","response":"amm","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.359319Z","response":"als","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.384965Z","response":" known","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.4106Z","response":" for","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.436415Z","response":" their","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.462343Z","response":" fl","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.488255Z","response":"uff","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.513924Z","response":"y","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.53984Z","response":" t","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.565804Z","response":"ails","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.591547Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.617754Z","response":" long","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.644056Z","response":" e","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.669662Z","response":"ars","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.696118Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.723046Z","response":" and","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.74792Z","response":" high","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.773253Z","response":"-","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.799223Z","response":"speed","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.824882Z","response":" hop","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.851591Z","response":"ping","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.878188Z","response":" ability","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.905076Z","response":".","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.931233Z","response":" They","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.957508Z","response":" are","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:54.983908Z","response":" her","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.010884Z","response":"b","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.037744Z","response":"iv","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.063678Z","response":"ores","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.091436Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.116859Z","response":" primarily","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.143336Z","response":" feed","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.169743Z","response":"ing","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.195711Z","response":" on","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.221799Z","response":" gr","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.247901Z","response":"asses","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.274336Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.300719Z","response":" leaves","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.326804Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.353286Z","response":" and","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.379486Z","response":" roots","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.405655Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.431705Z","response":" and","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.458017Z","response":" are","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.484483Z","response":" often","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.510567Z","response":" recognized","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.536882Z","response":" by","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.562919Z","response":" their","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.589258Z","response":" white","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.615442Z","response":" fac","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.64162Z","response":"ial","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.668015Z","response":" black","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.694149Z","response":"marks","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.72096Z","response":" above","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.747273Z","response":" their","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.773471Z","response":" eyes","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.799616Z","response":".","done":false}
{"model":"granite3.3:2b","created_at":"2025-07-29T18:42:55.826077Z","response":"","done":true,"done_reason":"stop","context":[49152,2946,49153,39558,390,17071,2821,44,30468,225,36,34,36,38,32,203,4282,884,8080,278,659,30,18909,810,25697,32,2448,884,312,17247,19551,47330,32,0,203,49152,496,49153,8591,312,40810,328,225,36,4504,28842,0,203,49152,17594,49153,68,360,5960,884,5532,372,16538,31,41658,345,38169,3528,8967,436,3623,2022,2966,107,273,1535,30,1946,484,4177,30,461,3857,31,7670,23592,7075,13609,32,11228,884,7791,84,387,6845,30,37897,6985,299,544,2914,2515,30,26243,30,461,33032,30,461,884,12270,27149,810,3623,8400,9652,564,6176,5507,3684,3623,31986,32],"total_duration":1824223042,"load_duration":21916417,"prompt_eval_count":51,"prompt_eval_duration":42432084,"eval_count":68,"eval_duration":1759073083}
[DEBUG] ollama_api_post: return 0
[DEBUG] ollama_generate_json: return: 0

[DEBUG] ollama_generate_stream_json: return: 0
```
