# ollama_generate_stream_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.42.41

## Demo

```bash
ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.378108734Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.37812371Z",
  "response": "",
  "thinking": "We",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.378128973Z",
  "response": "",
  "thinking": " need",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.37813346Z",
  "response": "",
  "thinking": " to",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.378137709Z",
  "response": "",
  "thinking": " follow",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.378144504Z",
  "response": "",
  "thinking": " the",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.380620674Z",
  "response": "",
  "thinking": " instructions",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.383377904Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.383386531Z",
  "response": "",
  "thinking": " User",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.383393635Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.383398781Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.383404863Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.383410577Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.383423098Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.391766287Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.391778021Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.39178398Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.391790803Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.416041772Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.416052421Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.416058644Z",
  "response": "",
  "thinking": " That's",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.424432113Z",
  "response": "",
  "thinking": " fine",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.437298669Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.437307031Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.44446653Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.446027418Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.452376238Z",
  "response": "",
  "thinking": " like",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.459461301Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.465684374Z",
  "response": "",
  "thinking": "fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.475974013Z",
  "response": "",
  "thinking": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.482164262Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.485523576Z",
  "response": "",
  "thinking": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.492410302Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.500952984Z",
  "response": "",
  "thinking": " swift",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.50675487Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.517042099Z",
  "response": "",
  "thinking": " No",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.524287941Z",
  "response": "",
  "thinking": " violation",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.525195489Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.575100677Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.581748531Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.587887906Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.59175359Z",
  "response": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.599307762Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.60526207Z",
  "response": " swift",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.624950811Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.624969586Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:07.624972606Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 519738337,
  "prompt_eval_count": 81,
  "eval_count": 54
}
```

## Demo Debug

```bash
OLLAMA_LIB_DEBUG=1 ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
[DEBUG] 23:12:08:089113000: ollama_generate_stream_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 23:12:08:111164400: ollama_generate_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 23:12:08:129428200: ollama_generate_json: OLLAMA_LIB_STREAM: 1
[DEBUG] 23:12:08:159599500: ollama_api_post: [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 23:12:08:177757900: _call_curl: [POST] [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 23:12:08:195714800: _call_curl: OLLAMA_LIB_API: https://ollama.com
[DEBUG] 23:12:08:214272900: _call_curl: Turbo Mode
[DEBUG] 23:12:08:231567600: _call_curl: json_body: [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 23:12:09:504616400: ollama_api_post: success: return 0
[DEBUG] 23:12:09:522865900: ollama_generate_json: success: return: 0
[DEBUG] 23:12:09:539901600: ollama_generate_stream_json: return: 0
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.691736504Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.693491285Z",
  "response": "",
  "thinking": "The",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.694761208Z",
  "response": "",
  "thinking": " user",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.694832642Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.695793463Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.695802376Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.697004115Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.698326247Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.69834292Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.706191883Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.711415801Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.711425203Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.714587822Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.727323015Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.733004233Z",
  "response": "",
  "thinking": " That's",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.743499744Z",
  "response": "",
  "thinking": " straightforward",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.751018297Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.763373186Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.77237377Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.784333893Z",
  "response": "",
  "thinking": " adjectives",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.791471505Z",
  "response": "",
  "thinking": " or",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.797523338Z",
  "response": "",
  "thinking": " nouns",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.811276987Z",
  "response": "",
  "thinking": " describing",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.816526404Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.822858147Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.832839372Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.845095957Z",
  "response": "",
  "thinking": " No",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.852251396Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.861436892Z",
  "response": "",
  "thinking": " violation",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.869846881Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.880326277Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.895457108Z",
  "response": "",
  "thinking": " answer",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.905344562Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.962466477Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.986591812Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.986605799Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:08.988266534Z",
  "response": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:09.000110588Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:09.007000405Z",
  "response": " inquis",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:09.015091602Z",
  "response": "itive",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:09.023608471Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:09.031362309Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:12:09.031368204Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 685066076,
  "prompt_eval_count": 81,
  "eval_count": 50
}
```
