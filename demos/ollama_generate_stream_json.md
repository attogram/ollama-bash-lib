# ollama_generate_stream_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.42.18

## Demo

```bash
ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.199521295Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.20263303Z",
  "response": "",
  "thinking": "User",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.202645495Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.202654632Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.202660447Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.202666465Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.202671697Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.202676442Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.202681027Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.20268549Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.202841459Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.203088352Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.203097956Z",
  "response": "",
  "thinking": " This",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.203104538Z",
  "response": "",
  "thinking": " is",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.205236254Z",
  "response": "",
  "thinking": " allowed",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.205244564Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.205250301Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.205256267Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.205262384Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.20526744Z",
  "response": "",
  "thinking": " describing",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.205272664Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.205284149Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.205289245Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.20529446Z",
  "response": "",
  "thinking": " Should",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.205299093Z",
  "response": "",
  "thinking": " be",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.209297425Z",
  "response": "",
  "thinking": " safe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.213428164Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.245378328Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.249584119Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.254510409Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.260953947Z",
  "response": " rapid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.263260378Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.275251366Z",
  "response": " curious",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.275260266Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.278699648Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:47.278704644Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 316071589,
  "prompt_eval_count": 81,
  "eval_count": 43
}
```

## Demo Debug

```bash
OLLAMA_LIB_DEBUG=1 ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
[DEBUG] 21:46:47:740821000: ollama_generate_stream_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 21:46:47:752648400: ollama_generate_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 21:46:47:764509900: ollama_generate_json: OLLAMA_LIB_STREAM: 1
[DEBUG] 21:46:47:789027000: ollama_api_post: [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 21:46:47:802634700: _call_curl: [POST] [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 21:46:47:815219200: _call_curl: OLLAMA_LIB_API: https://ollama.com
[DEBUG] 21:46:47:827429700: _call_curl: Turbo Mode
[DEBUG] 21:46:47:838781100: _call_curl: adding json body: [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 21:46:48:784344600: ollama_api_post: success: return 0
[DEBUG] 21:46:48:795402300: ollama_generate_json: success: return: 0
[DEBUG] 21:46:48:806775800: ollama_generate_stream_json: return: 0
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.201422823Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.201442526Z",
  "response": "",
  "thinking": "The",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.201449203Z",
  "response": "",
  "thinking": " user",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.20179259Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.20180679Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.203989384Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.20400245Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.204010285Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.204015865Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.204024483Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.204029812Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.204035488Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.204041445Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.204046548Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.204051191Z",
  "response": "",
  "thinking": " This",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.204948145Z",
  "response": "",
  "thinking": " is",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.204956715Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.205725975Z",
  "response": "",
  "thinking": " simple",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.205733812Z",
  "response": "",
  "thinking": " request",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.205740295Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.20574535Z",
  "response": "",
  "thinking": " No",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.205750148Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.205910887Z",
  "response": "",
  "thinking": " issues",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.205920114Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.205986621Z",
  "response": "",
  "thinking": " We",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.206612002Z",
  "response": "",
  "thinking": " can",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.209815216Z",
  "response": "",
  "thinking": " comply",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.224781701Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.224796261Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.224803755Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.22481021Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.233242888Z",
  "response": "",
  "thinking": " like",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.233571326Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.239781127Z",
  "response": "",
  "thinking": "fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.245817102Z",
  "response": "",
  "thinking": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.245825913Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.250022241Z",
  "response": "",
  "thinking": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.25464114Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.271583061Z",
  "response": "",
  "thinking": " hopping",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.271592914Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.271598699Z",
  "response": "",
  "thinking": " That's",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.271604994Z",
  "response": "",
  "thinking": " fine",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.274742457Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.305110961Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.308919464Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.312743217Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.316455956Z",
  "response": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.323325385Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.325127067Z",
  "response": " hopping",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.340917482Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.340929153Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T19:46:48.340931412Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 356735181,
  "prompt_eval_count": 81,
  "eval_count": 59
}
```
