# ollama_generate_stream_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.39.2

## Demo

```bash
ollama_generate_stream_json "llava:7b" "Describe a rabbit in 2 short sentences"
```
```json
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.039474Z","response":" A","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.09501Z","response":" rab","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.148993Z","response":"bit","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.198689Z","response":" is","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.249003Z","response":" a","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.297919Z","response":" small","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.346506Z","response":",","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.397083Z","response":" mamm","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.445702Z","response":"al","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.493733Z","response":"ian","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.542451Z","response":" animal","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.590857Z","response":" with","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.639202Z","response":" long","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.688088Z","response":" ears","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.736209Z","response":" and","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.785132Z","response":" a","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.834615Z","response":" fl","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.883012Z","response":"uffy","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.93161Z","response":" tail","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:04.980048Z","response":".","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.029963Z","response":" They","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.078195Z","response":" are","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.126598Z","response":" known","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.174981Z","response":" for","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.223241Z","response":" their","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.271889Z","response":" ability","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.320422Z","response":" to","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.368851Z","response":" breed","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.417222Z","response":" rapidly","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.466307Z","response":",","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.515312Z","response":" often","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.564599Z","response":" producing","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.613269Z","response":" large","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.661569Z","response":" lit","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.709667Z","response":"ters","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.758169Z","response":".","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.806373Z","response":" Rab","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.855121Z","response":"bits","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.903341Z","response":" are","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:05.951607Z","response":" commonly","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.000659Z","response":" kept","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.049591Z","response":" as","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.098282Z","response":" pets","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.146811Z","response":" and","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.195697Z","response":" can","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.243896Z","response":" be","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.292159Z","response":" found","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.341555Z","response":" in","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.389923Z","response":" various","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.438537Z","response":" colors","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.4868Z","response":" and","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.535706Z","response":" patterns","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.58474Z","response":".","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.633667Z","response":" They","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.683099Z","response":" are","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.73249Z","response":" her","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.783317Z","response":"b","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.832655Z","response":"iv","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.881107Z","response":"ores","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.929384Z","response":" and","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:06.978172Z","response":" primarily","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:07.027307Z","response":" consume","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:07.076043Z","response":" grass","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:07.124431Z","response":"es","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:07.17354Z","response":" and","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:07.222005Z","response":" other","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:07.270491Z","response":" plant","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:07.319017Z","response":" materials","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:07.367414Z","response":".","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:07.416246Z","response":" ","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:07.464749Z","response":"","done":true,"done_reason":"stop","context":[733,16289,28793,27984,264,16479,2581,297,28705,28750,2485,23748,733,28748,16289,28793,330,16479,2581,349,264,1741,28725,27454,282,753,8527,395,1043,12446,304,264,972,23892,8675,28723,1306,460,2651,354,652,5537,298,14559,14099,28725,2608,15345,2475,8724,1532,28723,17467,7669,460,14473,4558,390,24642,304,541,347,1419,297,4118,9304,304,11533,28723,1306,460,559,28726,449,3626,304,13395,23327,10109,274,304,799,5100,7069,28723,28705],"total_duration":5425893041,"load_duration":1650472125,"prompt_eval_count":17,"prompt_eval_duration":348079792,"eval_count":71,"eval_duration":3425995708}

```

## Demo Debug

```bash
`OLLAMA_LIB_DEBUG=1 ollama_generate_stream_json "llava:7b" "Describe a rabbit in 2 short sentences"`
```
```json
[DEBUG] ollama_generate_stream_json: [llava:7b] [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_generate_json: [llava:7b] [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_generate_json: OLLAMA_LIB_STREAM: 1
[DEBUG] json_safe_value: 9 bytes [llava:7b]
[DEBUG] json_safe_value: 39 bytes [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_api_post: [/api/generate] [{"model":"llava:7b","prompt":"Describe a rabbit in 2 short sentences"}]
{"model":"llava:7b","created_at":"2025-07-30T17:46:07.613943Z","response":" A","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:07.663196Z","response":" rab","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:07.712509Z","response":"bit","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:07.762675Z","response":" is","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:07.811699Z","response":" a","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:07.860016Z","response":" small","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:07.914155Z","response":" mamm","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:07.963228Z","response":"al","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.012306Z","response":" with","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.060994Z","response":" long","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.109876Z","response":" ears","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.158397Z","response":",","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.206452Z","response":" fl","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.255059Z","response":"uffy","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.303348Z","response":" fur","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.351402Z","response":",","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.40033Z","response":" and","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.450312Z","response":" large","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.501385Z","response":" hind","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.556181Z","response":" legs","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.609997Z","response":".","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.662076Z","response":" They","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.712771Z","response":" are","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.762885Z","response":" known","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.814278Z","response":" for","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.863874Z","response":" their","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.912349Z","response":" ability","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:08.960342Z","response":" to","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.008724Z","response":" quickly","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.05866Z","response":" hop","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.108324Z","response":" around","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.156582Z","response":" and","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.204907Z","response":" are","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.253164Z","response":" often","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.30158Z","response":" associated","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.350273Z","response":" with","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.399383Z","response":" the","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.450208Z","response":" Easter","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.49875Z","response":" Bun","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.547228Z","response":"ny","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.595401Z","response":".","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.643717Z","response":" Rab","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.692356Z","response":"bits","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.74078Z","response":" can","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.790201Z","response":" be","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.838747Z","response":" found","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.887174Z","response":" in","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.935742Z","response":" various","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:09.984352Z","response":" habit","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:10.033839Z","response":"ats","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:10.082457Z","response":",","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:10.130874Z","response":" including","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:10.179423Z","response":" grass","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:10.227863Z","response":"lands","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:10.276543Z","response":",","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:10.325729Z","response":" forests","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:10.374178Z","response":",","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:10.423048Z","response":" and","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:10.471752Z","response":" even","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:10.520642Z","response":" urban","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:10.570278Z","response":" areas","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:10.619313Z","response":".","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:10.668256Z","response":" ","done":false}
{"model":"llava:7b","created_at":"2025-07-30T17:46:10.716907Z","response":"","done":true,"done_reason":"stop","context":[733,16289,28793,27984,264,16479,2581,297,28705,28750,2485,23748,733,28748,16289,28793,330,16479,2581,349,264,1741,27454,282,395,1043,12446,28725,972,23892,2982,28725,304,2475,21413,7969,28723,1306,460,2651,354,652,5537,298,4377,4654,1401,304,460,2608,5363,395,272,26402,28199,1780,28723,17467,7669,541,347,1419,297,4118,6189,1449,28725,2490,10109,5603,28725,25770,28725,304,1019,12270,5020,28723,28705],"total_duration":3169710667,"load_duration":15433375,"prompt_eval_count":17,"prompt_eval_duration":49519416,"eval_count":64,"eval_duration":3104051042}
[DEBUG] ollama_api_post: return 0
[DEBUG] ollama_generate_json: return: 0

[DEBUG] ollama_generate_stream_json: return: 0
```
