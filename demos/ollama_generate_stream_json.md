# ollama_generate_stream_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.41.21

## Demo

```bash
ollama_generate_stream_json "granite3.3:2b" "Describe a rabbit in 2 short sentences"
```
```json
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.3928331Z","response":"R","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.4097304Z","response":"ab","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.420385Z","response":"bits","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.4294127Z","response":" are","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.4394181Z","response":" small","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.4486114Z","response":" to","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.4570431Z","response":" medium","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.4660087Z","response":"-","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.4761257Z","response":"sized","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.4856603Z","response":" m","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.4945889Z","response":"amm","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.5037004Z","response":"als","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.5126809Z","response":" known","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.5227189Z","response":" for","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.5344091Z","response":" their","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.5434754Z","response":" fl","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.5540896Z","response":"uff","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.563115Z","response":"y","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.5725639Z","response":" t","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.5821846Z","response":"ails","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.5916932Z","response":" and","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.6003262Z","response":" long","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.6104359Z","response":" e","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.6204724Z","response":"ars","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.6299854Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.6400552Z","response":" which","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.6496022Z","response":" they","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.6585439Z","response":" use","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.6680999Z","response":" to","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.6772338Z","response":" detect","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.6877449Z","response":" pred","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.696923Z","response":"ators","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.7060151Z","response":".","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.7150309Z","response":" They","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.7256697Z","response":" are","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.7346655Z","response":" her","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.744191Z","response":"b","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.7541898Z","response":"iv","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.7632269Z","response":"ores","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.773938Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.7828803Z","response":" primarily","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.7919861Z","response":" feed","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.8021594Z","response":"ing","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.8111265Z","response":" on","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.820104Z","response":" gr","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.8293732Z","response":"asses","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.8404965Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.8496124Z","response":" leaves","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.8596085Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.8685906Z","response":" and","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.878033Z","response":" roots","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.8881123Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.8976587Z","response":" and","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.9066512Z","response":" are","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.9156358Z","response":" fam","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.9249406Z","response":"ous","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.9354814Z","response":" for","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.9450073Z","response":" their","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.9539183Z","response":" rapid","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.9628685Z","response":" hop","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.9736901Z","response":"ping","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.9826913Z","response":" ability","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:00.9917479Z","response":".","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.000401Z","response":"","done":true,"done_reason":"stop","context":[49152,2946,49153,39558,390,17071,2821,44,30468,225,36,34,36,38,32,203,4282,884,8080,278,659,30,18909,810,25697,32,2448,884,312,17247,19551,47330,32,0,203,49152,496,49153,8591,312,40810,328,225,36,4504,28842,0,203,49152,17594,49153,68,360,5960,884,5532,372,16538,31,41658,345,38169,3528,8967,436,3623,2022,2966,107,273,1535,461,1946,484,4177,30,1510,2953,793,372,11140,4626,4044,32,11228,884,7791,84,387,6845,30,37897,6985,299,544,2914,2515,30,26243,30,461,33032,30,461,884,15863,3291,436,3623,26671,23592,7075,13609,32],"total_duration":1875684400,"load_duration":1158842800,"prompt_eval_count":51,"prompt_eval_duration":107161100,"eval_count":64,"eval_duration":608653600}
```

## Demo Debug

```bash
OLLAMA_LIB_DEBUG=1 ollama_generate_stream_json "granite3.3:2b" "Describe a rabbit in 2 short sentences"
```
```json
[DEBUG] ollama_generate_stream_json: [granite3.3:2b] [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_generate_json: [granite3.3:2b] [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_generate_json: OLLAMA_LIB_STREAM: 1
[DEBUG] ollama_api_post: [/api/generate] [{
  "model": "granite3.3:2b",
  "prompt": ]
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.2929887Z","response":"R","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.3027214Z","response":"ab","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.311406Z","response":"bits","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.320776Z","response":" are","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.329689Z","response":" small","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.3384956Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.347802Z","response":" typically","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.3578689Z","response":" fl","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.3671246Z","response":"uff","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.3764465Z","response":"y","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.3864792Z","response":" m","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.3959827Z","response":"amm","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.4047484Z","response":"als","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.4136074Z","response":" known","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.4248867Z","response":" for","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.4351527Z","response":" their","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.4445789Z","response":" long","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.4533984Z","response":" e","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.4627094Z","response":"ars","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.4729766Z","response":" and","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.4820212Z","response":" rapid","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.4908332Z","response":" hop","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.4996587Z","response":"ping","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.5090088Z","response":" ability","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.5189875Z","response":".","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.5280776Z","response":" They","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.5369116Z","response":" are","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.5462125Z","response":" her","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.5563666Z","response":"b","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.565658Z","response":"iv","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.574897Z","response":"ores","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.5837385Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.5930368Z","response":" primarily","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.6031588Z","response":" feed","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.6119608Z","response":"ing","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.6212468Z","response":" on","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.6299364Z","response":" gr","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.6403953Z","response":"asses","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.6497252Z","response":" and","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.6590673Z","response":" leaves","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.6680051Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.6768026Z","response":" with","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.6876003Z","response":" distinct","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.696345Z","response":"ive","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.7057775Z","response":" black","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.7150467Z","response":"-","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.725721Z","response":"t","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.7357024Z","response":"ipped","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.7449094Z","response":" e","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.7548227Z","response":"ars","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.7636906Z","response":" and","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.7740447Z","response":" vi","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.7835332Z","response":"br","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.7933548Z","response":"ant","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.8032642Z","response":",","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.8127555Z","response":" rounded","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.8215357Z","response":" t","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.8308442Z","response":"ails","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.8399603Z","response":".","done":false}
{"model":"granite3.3:2b","created_at":"2025-08-03T18:55:01.8487654Z","response":"","done":true,"done_reason":"stop","context":[49152,2946,49153,39558,390,17071,2821,44,30468,225,36,34,36,38,32,203,4282,884,8080,278,659,30,18909,810,25697,32,2448,884,312,17247,19551,47330,32,0,203,49152,496,49153,8591,312,40810,328,225,36,4504,28842,0,203,49152,17594,49153,68,360,5960,884,5532,30,18214,2022,2966,107,345,38169,3528,8967,436,3623,1946,484,4177,461,26671,23592,7075,13609,32,11228,884,7791,84,387,6845,30,37897,6985,299,544,2914,2515,461,26243,30,623,19088,661,6176,31,102,9974,484,4177,461,8943,839,692,30,13116,273,1535,32],"total_duration":578673100,"load_duration":11592200,"prompt_eval_count":51,"prompt_eval_duration":3094000,"eval_count":60,"eval_duration":563986900}
[DEBUG] ollama_api_post: return 0
[DEBUG] ollama_generate_json: return: 0
[DEBUG] ollama_generate_stream_json: return: 0
```
