# ollama_generate_stream_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.43.0

## Demo

```bash
ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.36236571Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.362380379Z",
  "response": "",
  "thinking": "The",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.362385842Z",
  "response": "",
  "thinking": " user",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.362390105Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.362394544Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.362398913Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.362406766Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.362410673Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.362414637Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.369927709Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.373184367Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.379044111Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.379053665Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.382332284Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.392456822Z",
  "response": "",
  "thinking": " That's",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.392469068Z",
  "response": "",
  "thinking": " straightforward",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.398854182Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.399346975Z",
  "response": "",
  "thinking": " no",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.409992872Z",
  "response": "",
  "thinking": " problematic",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.410001766Z",
  "response": "",
  "thinking": " content",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.412797918Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.414458194Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.418425181Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.426587516Z",
  "response": "",
  "thinking": " adjectives",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.429917157Z",
  "response": "",
  "thinking": " or",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.430209327Z",
  "response": "",
  "thinking": " descriptors",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.444048938Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.444062548Z",
  "response": "",
  "thinking": " No",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.444072635Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.471966257Z",
  "response": "",
  "thinking": " issues",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.471980633Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.471988553Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.471994853Z",
  "response": "",
  "thinking": " answer",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.47200025Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.502136745Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.502160347Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.502171602Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.511985339Z",
  "response": " swift",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.511997394Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.518358077Z",
  "response": " curious",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.519121661Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.522214959Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:34.52222202Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 415016634,
  "prompt_eval_count": 81,
  "eval_count": 50
}
```

## Demo Debug

```bash
OLLAMA_LIB_DEBUG=1 ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
[DEBUG] 19:44:35:104794300: ollama_generate_stream_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 19:44:35:133907500: ollama_generate_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 19:44:35:157964000: ollama_generate_json: OLLAMA_LIB_STREAM: 1
[DEBUG] 19:44:35:201509200: ollama_api_post: [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 19:44:35:223841100: _call_curl: [POST] [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 19:44:35:253197400: _call_curl: OLLAMA_LIB_API: https://ollama.com
[DEBUG] 19:44:35:284108600: _call_curl: Turbo Mode
[DEBUG] 19:44:35:306080700: _call_curl: json_body: [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 19:44:36:217537600: ollama_api_post: success: return 0
[DEBUG] 19:44:36:253113900: ollama_generate_json: success: return: 0
[DEBUG] 19:44:36:278343900: ollama_generate_stream_json: return: 0
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.472190367Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.472208939Z",
  "response": "",
  "thinking": "We",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.47221648Z",
  "response": "",
  "thinking": " need",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.472223134Z",
  "response": "",
  "thinking": " to",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.472228535Z",
  "response": "",
  "thinking": " respond",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.472233382Z",
  "response": "",
  "thinking": " with",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.47378115Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.473790932Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.473798802Z",
  "response": "",
  "thinking": " describing",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.474202233Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.474678062Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.474824083Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.474837651Z",
  "response": "",
  "thinking": " Should",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.474847868Z",
  "response": "",
  "thinking": " be",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.478758975Z",
  "response": "",
  "thinking": " safe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.478771235Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.478781004Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.484591673Z",
  "response": "",
  "thinking": " something",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.491604079Z",
  "response": "",
  "thinking": " like",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.497677352Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.50166336Z",
  "response": "",
  "thinking": "soft",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.508060458Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.518639598Z",
  "response": "",
  "thinking": " quick",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.530923809Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.530941315Z",
  "response": "",
  "thinking": " adorable",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.53191863Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.537854955Z",
  "response": "",
  "thinking": " No",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.544465436Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.553399263Z",
  "response": "",
  "thinking": " issues",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.555915087Z",
  "response": "",
  "thinking": ".\n\n",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.597962966Z",
  "response": "soft",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.612521484Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.616168228Z",
  "response": " swift",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.619655181Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.622872859Z",
  "response": " adorable",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.628129919Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T17:44:35.628204833Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 384267038,
  "prompt_eval_count": 81,
  "eval_count": 44
}
```
