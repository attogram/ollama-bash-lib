# ollama_generate_stream_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.43.4

## Demo

```bash
ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.937676794Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.937701114Z",
  "response": "",
  "thinking": "The",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.93770781Z",
  "response": "",
  "thinking": " user",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.937713479Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.937718913Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.937724161Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.937731938Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.937744623Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.937760812Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.937769007Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.937782815Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.937792304Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.937798588Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.937805612Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.937811679Z",
  "response": "",
  "thinking": " We",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.937816193Z",
  "response": "",
  "thinking": " can",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.937826112Z",
  "response": "",
  "thinking": " comply",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.937831639Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.945417115Z",
  "response": "",
  "thinking": " No",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.94574419Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.951910218Z",
  "response": "",
  "thinking": " issues",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.967916336Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.967924902Z",
  "response": "",
  "thinking": " Just",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.98070569Z",
  "response": "",
  "thinking": " output",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.980722926Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.986642577Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:53.989685557Z",
  "response": "",
  "thinking": " describing",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.006676281Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.006692928Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.00670035Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.022096726Z",
  "response": "",
  "thinking": " Could",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.022111297Z",
  "response": "",
  "thinking": " be",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.032130477Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.032143547Z",
  "response": "",
  "thinking": "soft",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.045140332Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.04515398Z",
  "response": "",
  "thinking": " hopping",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.064372294Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.064389769Z",
  "response": "",
  "thinking": " furry",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.069300612Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.069312552Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.08437392Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.084386371Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.088425721Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.129163231Z",
  "response": "soft",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.138111063Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.144568391Z",
  "response": " hopping",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.145524768Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.151666813Z",
  "response": " fluffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.174729096Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:54.174740116Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 483524207,
  "prompt_eval_count": 81,
  "eval_count": 57
}
```

## Demo Debug

```bash
OLLAMA_LIB_DEBUG=1 ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
[DEBUG] 00:37:54:989719300: ollama_generate_stream_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 00:37:55:013808100: ollama_generate_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 00:37:55:035829600: ollama_generate_json: OLLAMA_LIB_STREAM: 1
[DEBUG] 00:37:55:069619800: ollama_api_post: [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 00:37:55:092224100: _call_curl: [POST] [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 00:37:55:116132700: _call_curl: OLLAMA_LIB_API: https://ollama.com
[DEBUG] 00:37:55:153214300: _call_curl: Turbo Mode
[DEBUG] 00:37:55:176412700: _call_curl: json_body: [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 00:37:56:118108100: ollama_api_post: success: return 0
[DEBUG] 00:37:56:148131200: ollama_generate_json: success: return: 0
[DEBUG] 00:37:56:170297400: ollama_generate_stream_json: return: 0
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.14221789Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.146011521Z",
  "response": "",
  "thinking": "The",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.146028458Z",
  "response": "",
  "thinking": " user",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.146042697Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.146051173Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.146060424Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.146066337Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.146072701Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.146084107Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.146091991Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.146511423Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.148448545Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.148459875Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.148467137Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.148472741Z",
  "response": "",
  "thinking": " That's",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.148478683Z",
  "response": "",
  "thinking": " straightforward",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.148483847Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.148488284Z",
  "response": "",
  "thinking": " Must",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.148500387Z",
  "response": "",
  "thinking": " respond",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.153035497Z",
  "response": "",
  "thinking": " with",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.153043909Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.153049678Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.153054255Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.153059677Z",
  "response": "",
  "thinking": " e",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.153064164Z",
  "response": "",
  "thinking": ".g",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.153068864Z",
  "response": "",
  "thinking": ".,",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.153076314Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.153080393Z",
  "response": "",
  "thinking": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.156064898Z",
  "response": "",
  "thinking": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.162227579Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.162487082Z",
  "response": "",
  "thinking": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.166729384Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.171316523Z",
  "response": "",
  "thinking": " hopping",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.174273761Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.178790219Z",
  "response": "",
  "thinking": " No",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.182115811Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.1873362Z",
  "response": "",
  "thinking": " violation",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.193554531Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.198448827Z",
  "response": "",
  "thinking": " Just",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.200734084Z",
  "response": "",
  "thinking": " respond",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.202729247Z",
  "response": "",
  "thinking": " with",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.206685616Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.210666589Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.214702829Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.244655066Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.247321371Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.251421902Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.255433741Z",
  "response": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.263011187Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.263740271Z",
  "response": " hopping",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.267597365Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.272063599Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T22:37:55.272076579Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 347333396,
  "prompt_eval_count": 81,
  "eval_count": 60
}
```
