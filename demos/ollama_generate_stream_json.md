# ollama_generate_stream_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.43.9

## Demo

```bash
ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.734702523Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.73471744Z",
  "response": "",
  "thinking": "The",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.734724029Z",
  "response": "",
  "thinking": " user",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.734729704Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.734734915Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.746392001Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.756549887Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.756563155Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.764666164Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.764682062Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.780532142Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.787669184Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.787685021Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.787692474Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.806736174Z",
  "response": "",
  "thinking": " This",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.81032973Z",
  "response": "",
  "thinking": " is",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.810343978Z",
  "response": "",
  "thinking": " straightforward",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.819796511Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.819808625Z",
  "response": "",
  "thinking": " No",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.83106219Z",
  "response": "",
  "thinking": " dis",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.83107119Z",
  "response": "",
  "thinking": "allowed",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.843212369Z",
  "response": "",
  "thinking": " content",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.850074235Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.850084503Z",
  "response": "",
  "thinking": " Just",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.855842923Z",
  "response": "",
  "thinking": " produce",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.870374878Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.870388057Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.884855989Z",
  "response": "",
  "thinking": " describing",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.884867248Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.894892849Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.894905168Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.905674161Z",
  "response": "",
  "thinking": " For",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.912802753Z",
  "response": "",
  "thinking": " example",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.912814007Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.936970501Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.936985182Z",
  "response": "",
  "thinking": "fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.93699223Z",
  "response": "",
  "thinking": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.954506545Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.968102599Z",
  "response": "",
  "thinking": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.968112733Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.968119282Z",
  "response": "",
  "thinking": " hopping",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.96812604Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.973908719Z",
  "response": "",
  "thinking": " That's",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.981084532Z",
  "response": "",
  "thinking": " fine",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:58.984061822Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.03374592Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.033759999Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.038437577Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.04419848Z",
  "response": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.050417645Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.055493144Z",
  "response": " hopping",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.061784978Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.067835361Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.06935008Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 653958718,
  "prompt_eval_count": 81,
  "eval_count": 61
}
```

## Demo Debug

```bash
OLLAMA_LIB_DEBUG=1 ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
[DEBUG] 01:51:59:424059000: ollama_generate_stream_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 01:51:59:435473000: ollama_generate_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 01:51:59:443472000: ollama_generate_json: OLLAMA_LIB_STREAM: 1
[DEBUG] 01:51:59:458377000: ollama_api_post: [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true,"verbose":false}]
[DEBUG] 01:51:59:465853000: _call_curl: [POST] [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true,"verbose":false}]
[DEBUG] 01:51:59:471946000: _call_curl: OLLAMA_LIB_API: https://ollama.com
[DEBUG] 01:51:59:478313000: _call_curl: Turbo Mode
[DEBUG] 01:51:59:484309000: _call_curl: json_body: [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true,"verbose":false}]
[DEBUG] 01:52:00:553507000: ollama_api_post: success: return 0
[DEBUG] 01:52:00:564170000: ollama_generate_json: success: return: 0
[DEBUG] 01:52:00:572806000: ollama_generate_stream_json: return: 0
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.998598047Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.99861649Z",
  "response": "",
  "thinking": "The",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.998622635Z",
  "response": "",
  "thinking": " user",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.998801408Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.998810005Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.998815942Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.998822448Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.998828274Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.998833886Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.998842228Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.998847552Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.998852342Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:51:59.998857345Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.000430039Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.000442807Z",
  "response": "",
  "thinking": " That's",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.000450403Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.000456229Z",
  "response": "",
  "thinking": " simple",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.007965164Z",
  "response": "",
  "thinking": " request",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.012868263Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.018602469Z",
  "response": "",
  "thinking": " no",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.033452953Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.033463613Z",
  "response": "",
  "thinking": " issues",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.039191298Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.048567235Z",
  "response": "",
  "thinking": " I",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.06688247Z",
  "response": "",
  "thinking": " can",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.066895233Z",
  "response": "",
  "thinking": " comply",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.0669025Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.073980268Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.079755534Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.083095839Z",
  "response": "",
  "thinking": " adjectives",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.093277831Z",
  "response": "",
  "thinking": " or",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.095950087Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.112081859Z",
  "response": "",
  "thinking": " describing",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.112091387Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.11832905Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.124296712Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.175713859Z",
  "response": "Soft",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.175720559Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.175726232Z",
  "response": " twitch",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.193330151Z",
  "response": "y",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.193339712Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.193348695Z",
  "response": " curious",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.198383101Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.210949393Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:52:00.210956812Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 469714477,
  "prompt_eval_count": 81,
  "eval_count": 52
}
```
