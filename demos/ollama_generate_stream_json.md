# ollama_generate_stream_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.43.8

## Demo

```bash
ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.425885743Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.425901168Z",
  "response": "",
  "thinking": "User",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.425910514Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.425917659Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.425924366Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.427672273Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.430427534Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.442299947Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.442311377Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.442317763Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.448540435Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.456495821Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.456508539Z",
  "response": "",
  "thinking": " That's",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.469229947Z",
  "response": "",
  "thinking": " fine",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.469240803Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.469247089Z",
  "response": "",
  "thinking": " No",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.470649533Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.474348609Z",
  "response": "",
  "thinking": " violation",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.480908245Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.494824364Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.499497962Z",
  "response": "",
  "thinking": " answer",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.49950736Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.519101993Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.522747289Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.527449926Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.541363425Z",
  "response": " curious",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.541374423Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.54138086Z",
  "response": " quick",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.544905437Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.546856542Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:32.548491048Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 408976316,
  "prompt_eval_count": 81,
  "eval_count": 38
}
```

## Demo Debug

```bash
OLLAMA_LIB_DEBUG=1 ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
[DEBUG] 23:23:32:842524000: ollama_generate_stream_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 23:23:32:855699000: ollama_generate_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 23:23:32:865796000: ollama_generate_json: OLLAMA_LIB_STREAM: 1
[DEBUG] 23:23:32:884117000: ollama_api_post: [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true,"verbose":false}]
[DEBUG] 23:23:32:892848000: _call_curl: [POST] [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true,"verbose":false}]
[DEBUG] 23:23:32:900690000: _call_curl: OLLAMA_LIB_API: https://ollama.com
[DEBUG] 23:23:32:908505000: _call_curl: Turbo Mode
[DEBUG] 23:23:32:915727000: _call_curl: json_body: [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true,"verbose":false}]
[DEBUG] 23:23:33:918680000: ollama_api_post: success: return 0
[DEBUG] 23:23:33:934185000: ollama_generate_json: success: return: 0
[DEBUG] 23:23:33:945441000: ollama_generate_stream_json: return: 0
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.461232381Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.461253247Z",
  "response": "",
  "thinking": "We",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.462841049Z",
  "response": "",
  "thinking": " need",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.462852441Z",
  "response": "",
  "thinking": " to",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.462858789Z",
  "response": "",
  "thinking": " describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.462865459Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.462870981Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.46287991Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.462885347Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.463035554Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.463045478Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.463052257Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.463057942Z",
  "response": "",
  "thinking": " The",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.463198934Z",
  "response": "",
  "thinking": " user",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.463554399Z",
  "response": "",
  "thinking": " request",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.463561714Z",
  "response": "",
  "thinking": " is",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.463830648Z",
  "response": "",
  "thinking": " simple",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.466576362Z",
  "response": "",
  "thinking": " and",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.466584787Z",
  "response": "",
  "thinking": " benign",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.466591399Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.4665968Z",
  "response": "",
  "thinking": " We",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.466601522Z",
  "response": "",
  "thinking": " need",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.466606774Z",
  "response": "",
  "thinking": " to",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.466615056Z",
  "response": "",
  "thinking": " comply",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.466620047Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.466625231Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.466629861Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.47598009Z",
  "response": "",
  "thinking": " adjectives",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.475993282Z",
  "response": "",
  "thinking": " or",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.477455314Z",
  "response": "",
  "thinking": " descriptors",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.482447331Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.485036356Z",
  "response": "",
  "thinking": " No",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.495831819Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.499371799Z",
  "response": "",
  "thinking": " issues",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.499380259Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.505105899Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.508341943Z",
  "response": "",
  "thinking": " answer",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.509239253Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.540173889Z",
  "response": "soft",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.549025714Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.549040868Z",
  "response": " speedy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.556022207Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.556031458Z",
  "response": " curious",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.567728833Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T21:23:33.567735807Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 369916918,
  "prompt_eval_count": 81,
  "eval_count": 52
}
```
