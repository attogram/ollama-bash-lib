# ollama_generate_stream_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.40.21

## Demo

```bash
ollama_generate_stream_json "mistral:7b" "Describe a rabbit in 2 short sentences"
```
```json
{"model":"mistral:7b","created_at":"2025-07-31T23:02:15.690167Z","response":" A","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:15.737725Z","response":" rab","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:15.785586Z","response":"bit","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:15.833796Z","response":" is","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:15.883244Z","response":" a","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:15.933992Z","response":" small","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:15.982008Z","response":",","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.030054Z","response":" fur","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.077788Z","response":"ry","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.125597Z","response":" mamm","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.173053Z","response":"al","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.221225Z","response":" with","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.268517Z","response":" long","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.315822Z","response":" ears","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.363184Z","response":" and","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.412023Z","response":" a","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.462232Z","response":" fl","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.50991Z","response":"uffy","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.55758Z","response":" tail","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.605666Z","response":",","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.653206Z","response":" known","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.700887Z","response":" for","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.752972Z","response":" its","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.800828Z","response":" rapid","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.849183Z","response":" hop","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.897729Z","response":"ping","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.946668Z","response":" movements","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:16.994365Z","response":" and","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.04427Z","response":" c","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.094631Z","response":"ott","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.142937Z","response":"ont","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.190774Z","response":"ail","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.238611Z","response":".","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.286285Z","response":" It","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.334007Z","response":" belongs","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.381726Z","response":" to","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.429803Z","response":" the","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.478451Z","response":" family","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.526057Z","response":" of","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.57378Z","response":" Lag","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.621556Z","response":"omorph","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.669469Z","response":"s","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.717165Z","response":" and","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.764833Z","response":" is","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.812459Z","response":" a","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.860083Z","response":" popular","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.907583Z","response":" pet","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:17.95554Z","response":" and","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.003322Z","response":" symbol","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.051288Z","response":" of","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.098966Z","response":" productivity","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.146927Z","response":" due","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.194792Z","response":" to","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.242639Z","response":" its","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.290396Z","response":" quick","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.338021Z","response":" reprodu","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.386033Z","response":"ction","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.433821Z","response":" rate","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.482043Z","response":".","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.530403Z","response":"","done":true,"done_reason":"stop","context":[3,29473,28752,1032,17247,3349,1065,29473,29518,3253,24516,4,1027,1098,17247,3349,1117,1032,2509,29493,3750,1411,28222,1050,1163,1811,13214,1072,1032,1740,24660,9443,29493,3419,1122,1639,9189,5422,3685,15839,1072,1045,2330,1445,1382,29491,1429,18595,1066,1040,2773,1070,21765,11947,29481,1072,1117,1032,5155,6176,1072,6370,1070,25272,3708,1066,1639,3704,13255,1213,5106,29491],"total_duration":5971659375,"load_duration":2704977333,"prompt_eval_count":14,"prompt_eval_duration":423283166,"eval_count":60,"eval_duration":2841564417}
```

## Demo Debug

```bash
OLLAMA_LIB_DEBUG=1 ollama_generate_stream_json "mistral:7b" "Describe a rabbit in 2 short sentences"
```
```json
[DEBUG] ollama_generate_stream_json: [mistral:7b] [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_generate_json: [mistral:7b] [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_generate_json: OLLAMA_LIB_STREAM: 1
[DEBUG] json_clean: 11 bytes [mistral:7b]
[DEBUG] json_clean: 39 bytes [Describe a rabbit in 2 short sentences]
[DEBUG] ollama_api_post: [/api/generate] [{"model":"mistral:7b","prompt":"Describe a]
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.669763Z","response":" A","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.718827Z","response":" rab","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.768875Z","response":"bit","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.818848Z","response":" is","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.868905Z","response":" a","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.919548Z","response":" small","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:18.969836Z","response":",","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.019355Z","response":" c","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.067154Z","response":"ott","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.114717Z","response":"ont","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.162213Z","response":"ail","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.209577Z","response":" mamm","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.257083Z","response":"al","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.304487Z","response":" known","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.351839Z","response":" for","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.399177Z","response":" its","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.44652Z","response":" long","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.493992Z","response":" ears","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.542128Z","response":" and","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.589897Z","response":" quick","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.638517Z","response":" ag","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.687065Z","response":"ility","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.735861Z","response":".","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.784121Z","response":" It","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.832072Z","response":" is","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.879844Z","response":" a","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.927857Z","response":" her","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:19.976538Z","response":"b","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:20.024917Z","response":"iv","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:20.073393Z","response":"ore","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:20.121201Z","response":" that","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:20.16888Z","response":" lives","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:20.216829Z","response":" in","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:20.264667Z","response":" bur","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:20.312459Z","response":"rows","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:20.360129Z","response":" and","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:20.40797Z","response":" feed","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:20.455606Z","response":"s","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:20.503232Z","response":" on","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:20.551379Z","response":" grass","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:20.599297Z","response":"es","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:20.646978Z","response":" and","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:20.695659Z","response":" vegetables","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:20.74247Z","response":".","done":false}
{"model":"mistral:7b","created_at":"2025-07-31T23:02:20.790386Z","response":"","done":true,"done_reason":"stop","context":[3,29473,28752,1032,17247,3349,1065,29473,29518,3253,24516,4,1027,1098,17247,3349,1117,1032,2509,29493,1045,2330,1445,1382,28222,1050,3419,1122,1639,1811,13214,1072,3704,1485,2000,29491,1429,1117,1032,1327,29494,1217,1199,1137,5389,1065,5332,4309,1072,6343,29481,1124,10877,1042,1072,19813,29491],"total_duration":2184944166,"load_duration":14060291,"prompt_eval_count":14,"prompt_eval_duration":48683250,"eval_count":45,"eval_duration":2121718875}
[DEBUG] ollama_api_post: return 0
[DEBUG] ollama_generate_json: return: 0
[DEBUG] ollama_generate_stream_json: return: 0
```
