# ollama_generate_stream_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.43.9

## Demo

```bash
ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.563646665Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.563664199Z",
  "response": "",
  "thinking": "The",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.563671025Z",
  "response": "",
  "thinking": " user",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.56367636Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.563681504Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.563686876Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.563695836Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.563701677Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.563706693Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.563711953Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.563717081Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.563728274Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.563734178Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.563739061Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.565608218Z",
  "response": "",
  "thinking": " That's",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.565618275Z",
  "response": "",
  "thinking": " straightforward",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.565625085Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.565630876Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.571465441Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.575304177Z",
  "response": "",
  "thinking": " adjectives",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.580543726Z",
  "response": "",
  "thinking": " or",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.587239777Z",
  "response": "",
  "thinking": " descriptors",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.597849203Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.599242274Z",
  "response": "",
  "thinking": " No",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.605895616Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.614823919Z",
  "response": "",
  "thinking": " issues",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.620669094Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.628960677Z",
  "response": "",
  "thinking": " Answer",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.63117242Z",
  "response": "",
  "thinking": " succinct",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.639974833Z",
  "response": "",
  "thinking": "ly",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.64450944Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.687549022Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.693449697Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.706335129Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.706344474Z",
  "response": " curious",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.714815263Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.719654198Z",
  "response": " swift",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.724560071Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.732657826Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:11.732664379Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 438253072,
  "prompt_eval_count": 81,
  "eval_count": 47
}
```

## Demo Debug

```bash
OLLAMA_LIB_DEBUG=1 ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
[DEBUG] 01:24:12:171212000: ollama_generate_stream_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 01:24:12:185444000: ollama_generate_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 01:24:12:198187000: ollama_generate_json: OLLAMA_LIB_STREAM: 1
[DEBUG] 01:24:12:217679000: ollama_api_post: [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true,"verbose":false}]
[DEBUG] 01:24:12:226691000: _call_curl: [POST] [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true,"verbose":false}]
[DEBUG] 01:24:12:234615000: _call_curl: OLLAMA_LIB_API: https://ollama.com
[DEBUG] 01:24:12:242702000: _call_curl: Turbo Mode
[DEBUG] 01:24:12:250217000: _call_curl: json_body: [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true,"verbose":false}]
[DEBUG] 01:24:13:505283000: ollama_api_post: success: return 0
[DEBUG] 01:24:13:521706000: ollama_generate_json: success: return: 0
[DEBUG] 01:24:13:533074000: ollama_generate_stream_json: return: 0
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.769187775Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.769203276Z",
  "response": "",
  "thinking": "We",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.769208097Z",
  "response": "",
  "thinking": " need",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.769212376Z",
  "response": "",
  "thinking": " to",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.769216789Z",
  "response": "",
  "thinking": " produce",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.769221845Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.769225938Z",
  "response": "",
  "thinking": " short",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.769231231Z",
  "response": "",
  "thinking": " answer",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.769236158Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.769243805Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.769249252Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.774640086Z",
  "response": "",
  "thinking": " describing",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.774649386Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.774655465Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.7746616Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.774667113Z",
  "response": "",
  "thinking": " No",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.77467223Z",
  "response": "",
  "thinking": " dis",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.77467718Z",
  "response": "",
  "thinking": "allowed",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.774686146Z",
  "response": "",
  "thinking": " content",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.774691119Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.789184057Z",
  "response": "",
  "thinking": " So",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.789194342Z",
  "response": "",
  "thinking": " respond",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.789201066Z",
  "response": "",
  "thinking": " with",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.79799678Z",
  "response": "",
  "thinking": " e",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.804006745Z",
  "response": "",
  "thinking": ".g",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.8080205Z",
  "response": "",
  "thinking": ".,",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.813228151Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.825496443Z",
  "response": "",
  "thinking": "fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.826597021Z",
  "response": "",
  "thinking": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.842020027Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.842029229Z",
  "response": "",
  "thinking": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.845364809Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.854497715Z",
  "response": "",
  "thinking": " curious",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.862428105Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.866445566Z",
  "response": "",
  "thinking": " Should",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.869565427Z",
  "response": "",
  "thinking": " be",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.875948097Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.891664016Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.891674378Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.919171781Z",
  "response": "",
  "thinking": " maybe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.91918373Z",
  "response": "",
  "thinking": " separated",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.919190484Z",
  "response": "",
  "thinking": " by",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.919198083Z",
  "response": "",
  "thinking": " commas",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.928444562Z",
  "response": "",
  "thinking": " or",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.928455553Z",
  "response": "",
  "thinking": " spaces",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.947673744Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.947682635Z",
  "response": "",
  "thinking": " Probably",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.947689077Z",
  "response": "",
  "thinking": " just",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.95944076Z",
  "response": "",
  "thinking": " list",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.959451939Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:12.971508825Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:13.008700897Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:13.014681071Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:13.022978545Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:13.029374236Z",
  "response": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:13.041104746Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:13.042024588Z",
  "response": " curious",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:13.046305387Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:13.064187029Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-15T23:24:13.064192617Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 601817878,
  "prompt_eval_count": 81,
  "eval_count": 67
}
```
