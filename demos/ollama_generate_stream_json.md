# ollama_generate_stream_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.42.23

## Demo

```bash
ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981183627Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981204164Z",
  "response": "",
  "thinking": "The",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981211442Z",
  "response": "",
  "thinking": " user",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981216754Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981225764Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981231153Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981237749Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981243207Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981248149Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981253167Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981257834Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981263097Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981271491Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981276832Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981281337Z",
  "response": "",
  "thinking": " That's",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981286402Z",
  "response": "",
  "thinking": " straightforward",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981291358Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981295828Z",
  "response": "",
  "thinking": " no",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.98130104Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981305622Z",
  "response": "",
  "thinking": " issues",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981309941Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981315101Z",
  "response": "",
  "thinking": " Just",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981322587Z",
  "response": "",
  "thinking": " provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981327414Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981339498Z",
  "response": "",
  "thinking": " adjectives",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981345228Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981349742Z",
  "response": "",
  "thinking": " Could",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981354544Z",
  "response": "",
  "thinking": " be",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981359341Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981364139Z",
  "response": "",
  "thinking": "fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.981371824Z",
  "response": "",
  "thinking": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:15.98137674Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.01257798Z",
  "response": "",
  "thinking": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.012593656Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.012601042Z",
  "response": "",
  "thinking": " quick",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.012608608Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.012614623Z",
  "response": "",
  "thinking": " That's",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.012619557Z",
  "response": "",
  "thinking": " safe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.012624578Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.043049345Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.045808356Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.050024965Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.054573129Z",
  "response": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.05882156Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.064458149Z",
  "response": " swift",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.067993402Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.072689356Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.072697846Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 379379402,
  "prompt_eval_count": 81,
  "eval_count": 55
}
```

## Demo Debug

```bash
OLLAMA_LIB_DEBUG=1 ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
[DEBUG] 00:55:16:661164600: ollama_generate_stream_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 00:55:16:671406600: ollama_generate_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 00:55:16:684075900: ollama_generate_json: OLLAMA_LIB_STREAM: 1
[DEBUG] 00:55:16:708298100: ollama_api_post: [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 00:55:16:718920000: _call_curl: [POST] [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 00:55:16:729437700: _call_curl: OLLAMA_LIB_API: https://ollama.com
[DEBUG] 00:55:16:741741800: _call_curl: Turbo Mode
[DEBUG] 00:55:16:753882200: _call_curl: json_body: [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 00:55:16:764737800: _call_curl: curl_args: -s -N -H Content-Type: application/json -H Authorization: Bearer 06ab07b80cdb4f2db7fe63336646c86f.O8ntAssNC-QUWdXK3urz4UDZ -X POST https://ollama.com/api/generate -d @-
[DEBUG] 00:55:17:752836400: ollama_api_post: success: return 0
[DEBUG] 00:55:17:763854900: ollama_generate_json: success: return: 0
[DEBUG] 00:55:17:773983100: ollama_generate_stream_json: return: 0
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.993281988Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.993299161Z",
  "response": "",
  "thinking": "The",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.993305468Z",
  "response": "",
  "thinking": " user",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.994918544Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.994931036Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.994938348Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.994945093Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.994950753Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.994955454Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.994960435Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.994968614Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.994973355Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.994979482Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.99498436Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.994988858Z",
  "response": "",
  "thinking": " Simple",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.994994445Z",
  "response": "",
  "thinking": " request",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.995000452Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.995005142Z",
  "response": "",
  "thinking": " non",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.995009838Z",
  "response": "",
  "thinking": "-",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.995188151Z",
  "response": "",
  "thinking": "contro",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.995610818Z",
  "response": "",
  "thinking": "vers",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.995938107Z",
  "response": "",
  "thinking": "ial",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.995952088Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.996367846Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.99655015Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.996558632Z",
  "response": "",
  "thinking": " adjectives",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:16.997729054Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.011893692Z",
  "response": "",
  "thinking": " e",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.011904763Z",
  "response": "",
  "thinking": ".g",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.011910399Z",
  "response": "",
  "thinking": ".,",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.014595853Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.017941105Z",
  "response": "",
  "thinking": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.032289747Z",
  "response": "",
  "thinking": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.032299917Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.032306033Z",
  "response": "",
  "thinking": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.034349891Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.038176623Z",
  "response": "",
  "thinking": " curious",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.044248579Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.046612038Z",
  "response": "",
  "thinking": " Should",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.052017721Z",
  "response": "",
  "thinking": " be",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.061314779Z",
  "response": "",
  "thinking": " fine",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.061327747Z",
  "response": "",
  "thinking": ".\n\n",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.063312842Z",
  "response": "",
  "thinking": "We",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.067499093Z",
  "response": "",
  "thinking": " need",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.071896025Z",
  "response": "",
  "thinking": " to",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.07533883Z",
  "response": "",
  "thinking": " obey",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.084767223Z",
  "response": "",
  "thinking": " policies",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.084779105Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.088737123Z",
  "response": "",
  "thinking": " There's",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.091823649Z",
  "response": "",
  "thinking": " no",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.101417614Z",
  "response": "",
  "thinking": " conflict",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.101427442Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.104082088Z",
  "response": "",
  "thinking": " Just",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.108710481Z",
  "response": "",
  "thinking": " answer",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.112548749Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.142450901Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.147335481Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.150193402Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.154431205Z",
  "response": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.159961492Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.166200419Z",
  "response": " curious",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.166752737Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.172403485Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-07T22:55:17.172409133Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 444187343,
  "prompt_eval_count": 81,
  "eval_count": 71
}
```
