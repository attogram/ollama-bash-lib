# ollama_generate_stream_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.42.40

## Demo

```bash
ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.003785901Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.003805928Z",
  "response": "",
  "thinking": "The",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.003812924Z",
  "response": "",
  "thinking": " user",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.003819257Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.013549625Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.015710029Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.025964483Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.030634923Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.040785065Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.045999143Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.053815414Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.064978419Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.078187783Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.082422961Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.086887465Z",
  "response": "",
  "thinking": " That's",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.109988272Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.109998572Z",
  "response": "",
  "thinking": " straightforward",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.110007202Z",
  "response": "",
  "thinking": " request",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.117715847Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.119900372Z",
  "response": "",
  "thinking": " no",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.133364826Z",
  "response": "",
  "thinking": " dis",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.13373009Z",
  "response": "",
  "thinking": "allowed",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.143378461Z",
  "response": "",
  "thinking": " content",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.152596425Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.163948484Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.171508307Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.177971277Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.179824841Z",
  "response": "",
  "thinking": " that",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.187613407Z",
  "response": "",
  "thinking": " describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.199394844Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.208712548Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.216604054Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.216613848Z",
  "response": "",
  "thinking": " Should",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.222781252Z",
  "response": "",
  "thinking": " be",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.230468874Z",
  "response": "",
  "thinking": " concise",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.236854706Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.247018531Z",
  "response": "",
  "thinking": " So",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.255785146Z",
  "response": "",
  "thinking": " answer",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.259977108Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.272705906Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.283388934Z",
  "response": "",
  "thinking": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.283398757Z",
  "response": "",
  "thinking": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.289264941Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.297515463Z",
  "response": "",
  "thinking": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.307392683Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.315966494Z",
  "response": "",
  "thinking": " agile",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.322788786Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.325633201Z",
  "response": "",
  "thinking": " Or",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.335498516Z",
  "response": "",
  "thinking": " similar",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.341559912Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.393469693Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.403814151Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.410040377Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.417127207Z",
  "response": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.430503094Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.434645248Z",
  "response": " agile",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.443361304Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:18.443367006Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 727379874,
  "prompt_eval_count": 81,
  "eval_count": 65
}
```

## Demo Debug

```bash
OLLAMA_LIB_DEBUG=1 ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
[DEBUG] 23:02:18:962374400: ollama_generate_stream_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 23:02:18:973346100: ollama_generate_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 23:02:18:983457800: ollama_generate_json: OLLAMA_LIB_STREAM: 1
[DEBUG] 23:02:19:006520100: ollama_api_post: [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 23:02:19:017739300: _call_curl: [POST] [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 23:02:19:028810700: _call_curl: OLLAMA_LIB_API: https://ollama.com
[DEBUG] 23:02:19:040201600: _call_curl: Turbo Mode
[DEBUG] 23:02:19:051667700: _call_curl: json_body: [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 23:02:20:496201500: ollama_api_post: success: return 0
[DEBUG] 23:02:20:506252300: ollama_generate_json: success: return: 0
[DEBUG] 23:02:20:517788600: ollama_generate_stream_json: return: 0
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.412244997Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.423514158Z",
  "response": "",
  "thinking": "The",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.428305317Z",
  "response": "",
  "thinking": " user",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.437598004Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.447922606Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.46482133Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.485262156Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.485275862Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.490263877Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.498078212Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.508473965Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.535171444Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.535182172Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.552682522Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.552692649Z",
  "response": "",
  "thinking": " It's",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.560470291Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.566417421Z",
  "response": "",
  "thinking": " straightforward",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.578883568Z",
  "response": "",
  "thinking": " request",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.602038705Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.604431853Z",
  "response": "",
  "thinking": " No",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.604444188Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.632799612Z",
  "response": "",
  "thinking": " violation",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.632813219Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.632820817Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.646127908Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.65364027Z",
  "response": "",
  "thinking": " adjectives",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.667944457Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.673285482Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.682171342Z",
  "response": "",
  "thinking": "soft",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.692189896Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.702282827Z",
  "response": "",
  "thinking": " twitch",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.711217569Z",
  "response": "",
  "thinking": "y",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.726106637Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.73401998Z",
  "response": "",
  "thinking": " fluffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.74065395Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.750351822Z",
  "response": "",
  "thinking": " Or",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.760091069Z",
  "response": "",
  "thinking": " any",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.773729299Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.783529901Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.789601403Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.799055901Z",
  "response": "",
  "thinking": " Should",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.810569305Z",
  "response": "",
  "thinking": " be",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.818072324Z",
  "response": "",
  "thinking": " fine",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.828766095Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.903902113Z",
  "response": "Soft",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.91097148Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.917008042Z",
  "response": " twitch",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.928534756Z",
  "response": "y",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.939502495Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.945461068Z",
  "response": " fluffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.957522036Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.964906746Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-09T21:02:19.964913599Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 820009805,
  "prompt_eval_count": 81,
  "eval_count": 60
}
```
