# ollama_generate_stream_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.43.1

## Demo

```bash
ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.155477565Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.155497458Z",
  "response": "",
  "thinking": "The",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.155506112Z",
  "response": "",
  "thinking": " user",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.160393435Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.167340921Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.172315049Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.178976199Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.190071102Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.191086984Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.196464287Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.202444704Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.211820121Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.216179704Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.222140714Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.226541347Z",
  "response": "",
  "thinking": " Simple",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.234956598Z",
  "response": "",
  "thinking": " request",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.242130749Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.245679796Z",
  "response": "",
  "thinking": " no",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.251865879Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.257623068Z",
  "response": "",
  "thinking": " issues",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.264795668Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.270630039Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.277122001Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.281803468Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.287561204Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.29322542Z",
  "response": "",
  "thinking": " describing",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.301575745Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.30569104Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.311302249Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.328654621Z",
  "response": "",
  "thinking": " e",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.328667318Z",
  "response": "",
  "thinking": ".g",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.336268609Z",
  "response": "",
  "thinking": ".,",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.33628101Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.341178548Z",
  "response": "",
  "thinking": "fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.34989027Z",
  "response": "",
  "thinking": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.355182086Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.361209772Z",
  "response": "",
  "thinking": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.36791069Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.372588191Z",
  "response": "",
  "thinking": " quick",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.378352203Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.387270625Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.390877855Z",
  "response": "",
  "thinking": " answer",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.405216424Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.447249683Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.447258366Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.451933565Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.461639447Z",
  "response": " timid",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.462289398Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.478363835Z",
  "response": " quick",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.478373446Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.481770639Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:37.481778734Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 561050704,
  "prompt_eval_count": 81,
  "eval_count": 59
}
```

## Demo Debug

```bash
OLLAMA_LIB_DEBUG=1 ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
[DEBUG] 21:40:38:194092000: ollama_generate_stream_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 21:40:38:216277900: ollama_generate_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 21:40:38:248948900: ollama_generate_json: OLLAMA_LIB_STREAM: 1
[DEBUG] 21:40:38:284774600: ollama_api_post: [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 21:40:38:309305200: _call_curl: [POST] [/api/generate] [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 21:40:38:339282500: _call_curl: OLLAMA_LIB_API: https://ollama.com
[DEBUG] 21:40:38:363532800: _call_curl: Turbo Mode
[DEBUG] 21:40:38:401681300: _call_curl: json_body: [{"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true}]
[DEBUG] 21:40:39:190184900: ollama_api_post: success: return 0
[DEBUG] 21:40:39:211964500: ollama_generate_json: success: return: 0
[DEBUG] 21:40:39:236645200: ollama_generate_stream_json: return: 0
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.472195576Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.472212096Z",
  "response": "",
  "thinking": "We",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.472218312Z",
  "response": "",
  "thinking": " need",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.472223592Z",
  "response": "",
  "thinking": " to",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.472228585Z",
  "response": "",
  "thinking": " respond",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.472236957Z",
  "response": "",
  "thinking": " with",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.47224341Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.472248205Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.472253079Z",
  "response": "",
  "thinking": " describing",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.47225927Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.475546526Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.475556253Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.475562012Z",
  "response": "",
  "thinking": " No",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.475568424Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.475573996Z",
  "response": "",
  "thinking": " issues",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.47557881Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.475584361Z",
  "response": "",
  "thinking": " Just",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.475589477Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.475597771Z",
  "response": "",
  "thinking": " simple",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.475602869Z",
  "response": "",
  "thinking": " answer",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.475607488Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.475612241Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.475617069Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.475622367Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.479233688Z",
  "response": " curious",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.479244255Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.482948973Z",
  "response": " swift",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.487551048Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.497628869Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-10T19:40:38.497634542Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 262534820,
  "prompt_eval_count": 81,
  "eval_count": 37
}
```
