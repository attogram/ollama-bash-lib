# ollama_generate_stream_json

A [demo](../README.md#demos) of [Ollama Bash Lib](https://github.com/attogram/ollama-bash-lib) v0.44.4

## Demo

```bash
ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.603290977Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.603316183Z",
  "response": "",
  "thinking": "We",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.603327746Z",
  "response": "",
  "thinking": " need",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.603338224Z",
  "response": "",
  "thinking": " to",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.604491582Z",
  "response": "",
  "thinking": " respond",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.604507216Z",
  "response": "",
  "thinking": " with",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.604517705Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.604662031Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.604864388Z",
  "response": "",
  "thinking": " describing",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.6048739Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.605376566Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.605393972Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.605402466Z",
  "response": "",
  "thinking": " It's",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.606000142Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.60601302Z",
  "response": "",
  "thinking": " straightforward",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.607469765Z",
  "response": "",
  "thinking": " request",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.608018443Z",
  "response": "",
  "thinking": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.60802719Z",
  "response": "",
  "thinking": " no",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.608035434Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.608040676Z",
  "response": "",
  "thinking": " issues",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.608181745Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.608942193Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.608950683Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.608956097Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.608991778Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.628170144Z",
  "response": "Fl",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.633960981Z",
  "response": "uffy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.635449183Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.640792118Z",
  "response": " curious",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.646390356Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.647241288Z",
  "response": " swift",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.651188664Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.656418876Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:05.656425959Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 318792049,
  "prompt_eval_count": 81,
  "eval_count": 41
}
```

## Demo Debug

```bash
OLLAMA_LIB_DEBUG=1 ollama_generate_stream_json "gpt-oss:120b" "Describe a rabbit in 3 words"

```
```json
[DEBUG] 00:18:06:384391900: ollama_generate_stream_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 00:18:06:407409500: ollama_generate_json: [gpt-oss:120b] [Describe a rabbit in 3 words]
[DEBUG] 00:18:06:436262200: _is_valid_model: VALID: [gpt-oss:120b]
[DEBUG] 00:18:06:472823200: ollama_generate_json: stream: true
[DEBUG] 00:18:06:494378900: ollama_generate_json: thinking: false
[DEBUG] 00:18:06:528503200: ollama_generate_json: json_payload: {"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true,"thinking":false}
[DEBUG] 00:18:06:565692400: ollama_api_post: [/api/generate] {"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true,"thinking":false}
[DEBUG] 00:18:06:597113900: _call_curl: [POST] [/api/generate] {"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true,"thinking":false}
[DEBUG] 00:18:06:646492600: _is_valid_json: success
[DEBUG] 00:18:06:671651700: _call_curl: OLLAMA_LIB_API: https://ollama.com
[DEBUG] 00:18:06:696396000: _call_curl: Turbo Mode
[DEBUG] 00:18:06:720046100: _call_curl: json_body: {"model":"gpt-oss:120b","prompt":"Describe a rabbit in 3 words","stream":true,"thinking":false}
[DEBUG] 00:18:06:755104800: _call_curl: piping json_body | curl -s -N -H Content-Type: application/json -H Authorization: Bearer [REDACTED] -X POST https://ollama.com/api/generate -d @-
[DEBUG] 00:18:07:676573100: ollama_api_post: success
[DEBUG] 00:18:07:703628600: ollama_generate_json: success
[DEBUG] 00:18:07:729261000: ollama_generate_stream_json: return: 0
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.830736053Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.831233877Z",
  "response": "",
  "thinking": "The",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.831390667Z",
  "response": "",
  "thinking": " user",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.831407972Z",
  "response": "",
  "thinking": " asks",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.831416331Z",
  "response": "",
  "thinking": " \"",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.832129902Z",
  "response": "",
  "thinking": "Describe",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.832140662Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.832147429Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.83218403Z",
  "response": "",
  "thinking": " in",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.832841101Z",
  "response": "",
  "thinking": " ",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.834350973Z",
  "response": "",
  "thinking": "3",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.834359574Z",
  "response": "",
  "thinking": " words",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.83436626Z",
  "response": "",
  "thinking": "\".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.834371725Z",
  "response": "",
  "thinking": " This",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.83437685Z",
  "response": "",
  "thinking": " is",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.834381968Z",
  "response": "",
  "thinking": " straightforward",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.834717016Z",
  "response": "",
  "thinking": ":",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.8347243Z",
  "response": "",
  "thinking": " we",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.835424197Z",
  "response": "",
  "thinking": " can",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.835434624Z",
  "response": "",
  "thinking": " produce",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.835467172Z",
  "response": "",
  "thinking": " three",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.835482986Z",
  "response": "",
  "thinking": " adjectives",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.836052977Z",
  "response": "",
  "thinking": " or",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.836068305Z",
  "response": "",
  "thinking": " nouns",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.836077125Z",
  "response": "",
  "thinking": " describing",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.836423445Z",
  "response": "",
  "thinking": " a",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.836435829Z",
  "response": "",
  "thinking": " rabbit",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.838609997Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.842599505Z",
  "response": "",
  "thinking": " No",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.846745226Z",
  "response": "",
  "thinking": " policy",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.850879713Z",
  "response": "",
  "thinking": " issues",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.855643873Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.859154615Z",
  "response": "",
  "thinking": " Provide",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.862862873Z",
  "response": "",
  "thinking": " concise",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.868867746Z",
  "response": "",
  "thinking": " answer",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.87340604Z",
  "response": "",
  "thinking": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.904180645Z",
  "response": "Soft",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.904193626Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.908025425Z",
  "response": " swift",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.914757441Z",
  "response": ",",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.92168788Z",
  "response": " whisk",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.921700273Z",
  "response": "ered",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.929083349Z",
  "response": ".",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.929096855Z",
  "response": "",
  "done": false
}
{
  "model": "gpt-oss:120b",
  "created_at": "2025-08-16T22:18:06.929100312Z",
  "response": "",
  "done": true,
  "done_reason": "stop",
  "total_duration": 355041588,
  "prompt_eval_count": 81,
  "eval_count": 52
}
```
